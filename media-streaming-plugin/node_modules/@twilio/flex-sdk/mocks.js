/*!
 * 
 * @twilio/flex-sdk.js 0.13.0
 * The following license applies to all parts of this software except as documented below.
 * 
 * Copyright (c) 2020 Twilio, Inc.
 * All rights reserved.
 * 
 * Licensed under the Apache License, Version 2.0 (the “License”);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an “AS IS” BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 */
module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=129)}([function(e,t,n){"use strict";n.d(t,"i",(function(){return r.e})),n.d(t,"f",(function(){return r.b})),n.d(t,"g",(function(){return r.c})),n.d(t,"h",(function(){return r.d})),n.d(t,"c",(function(){return o.a})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return b.a})),n.d(t,"e",(function(){return h.d})),n.d(t,"b",(function(){return y.a}));var r=n(37),o=n(52);n(56),n(3),n(57),n(63),n(6),n(50),n(7),n(8),n(9),n(14),n(36);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function l(e,t,n){return(l=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&d(o,n.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,n,r=(t=o,n=f(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return u(this,e)});function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Internal Error";return a(this,o),e=r.call(this,t),Object.setPrototypeOf(c(e),o.prototype),e}return o}(s(Error)),b=n(20),h=(n(30),n(38)),y=n(65)},function(e,t){e.exports=require("inversify")},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));n(55),n(98),n(64);function r(e){var t=e.match("/modules/[A-z]+");return t?t[0].replace("/modules/",""):""}function o(e){var t=e.match("([A-z])+([.]*[A-z]*)[.][jt]s");return t?t[0]:""}},function(e,t){e.exports=require("core-js/modules/es.object.to-string.js")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return a.c})),n.d(t,"d",(function(){return u.b})),n.d(t,"e",(function(){return u.d})),function(e){e.Trace="trace",e.Debug="debug",e.Info="info",e.Warn="warn",e.Error="error"}(o||(o={}));var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Debug;r(this,e),this.loggerName=t,this.severity=n,this.timestamp=new Date,this.context={}},a=n(58),u=n(22)},function(e,t,n){"use strict";var r=n(18);n.d(t,"c",(function(){return r.c})),n.d(t,"b",(function(){return r.b})),n.d(t,"e",(function(){return r.f})),n.d(t,"i",(function(){return r.k})),n.d(t,"d",(function(){return r.e})),n.d(t,"f",(function(){return r.g})),n.d(t,"g",(function(){return r.h})),n.d(t,"h",(function(){return r.i})),n.d(t,"a",(function(){return r.a}))},function(e,t){e.exports=require("core-js/modules/es.array.iterator.js")},function(e,t){e.exports=require("core-js/modules/es.string.iterator.js")},function(e,t){e.exports=require("core-js/modules/web.dom-collections.iterator.js")},function(e,t){e.exports=require("core-js/modules/es.symbol.js")},function(e,t){e.exports=require("core-js/modules/es.promise.js")},function(e,t,n){"use strict";var r=n(29);n.d(t,"b",(function(){return r.d}));var o=n(73);n.d(t,"a",(function(){return o.a}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return s}));n(9),n(14),n(3);var r=Symbol.for("TelemetryClient"),o=Symbol.for("TelemetryClientFactory"),i=Symbol.for("TelemetryEventGroup"),a=Symbol.for("TelemetryEventGroupFactory"),u=Symbol.for("TelemetryProcessor"),c=Symbol.for("TelemetryOptions"),s=Symbol.for("TelemetryRateLimiterOptions")},function(e,t){e.exports=require("core-js/modules/es.weak-map.js")},function(e,t){e.exports=require("core-js/modules/es.symbol.description.js")},function(e,t){e.exports=require("regenerator-runtime/runtime.js")},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o.d})),n.d(t,"c",(function(){return o.c})),n.d(t,"b",(function(){return o.b})),function(e){e.TokenExpired="tokenExpired",e.TokenAboutToExpire="tokenAboutToExpire",e.TokenUpdated="tokenUpdated",e.TokenAutoUpdateFailed="tokenAutoUpdateFailed",e.TokenMaxLifetimeReached="tokenMaxLifetimeReached",e.ConnectionLost="connectionLost",e.ConnectionRestored="connectionRestored",e.Disconnected="disconnected"}(r||(r={}));var o=n(51)},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c}));n(9),n(14),n(3);var r=Symbol.for("TwilsockAdapter"),o=Symbol.for("HttpAdapter"),i="TelemetryService",a="ConfigurationService",u="FeaturesService",c="FederatedAuthService"},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return p}));n(9),n(14),n(3);var r=Symbol.for("EnvironmentConfig"),o=Symbol.for("AccountConfig"),i=(Symbol.for("AccountConfigData"),Symbol.for("ConfigDataContainer")),a=Symbol.for("AccountConfigProvider"),u=Symbol.for("AccountConfigUpdater"),c=Symbol.for("PublicConfigProvider"),s=Symbol.for("PublicConfigMockOptions"),l=Symbol.for("FeaturesProvider"),f=Symbol.for("getFeaturesConfig"),d=Symbol.for("getAccountConfig"),p=Symbol.for("AccountConfigOptions")},function(e,t,n){"use strict";n.d(t,"c",(function(){return o.b})),n.d(t,"b",(function(){return o.a})),n.d(t,"a",(function(){return r}));var r,o=n(49);!function(e){e.TokenMaxLifetimeReached="tokenMaxLifetimeReached",e.TokenAutoUpdateFailed="tokenAutoUpdateFailed"}(r||(r={}))},function(e,t,n){"use strict";var r,o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u})),function(e){e[e.PermissionDeniedError=20003]="PermissionDeniedError",e[e.InvalidAccessToken=20101]="InvalidAccessToken",e[e.AccessTokenExpired=20104]="AccessTokenExpired",e[e.TooManyRequests=20429]="TooManyRequests",e[e.AuthorizationError=45003]="AuthorizationError",e[e.ValidationError=45004]="ValidationError",e[e.ConnectionError=45011]="ConnectionError",e[e.SDK=45500]="SDK",e[e.Unknown=45501]="Unknown",e[e.Forbidden=45502]="Forbidden",e[e.InvalidParams=45503]="InvalidParams",e[e.NotFound=45504]="NotFound",e[e.InvalidState=45505]="InvalidState",e[e.TooManySDKRequests=45506]="TooManySDKRequests",e[e.TemporarilyDisabled=45507]="TemporarilyDisabled",e[e.NetworkError=45508]="NetworkError",e[e.TwilsockConnectionError=45511]="TwilsockConnectionError",e[e.DownstreamServiceError=45512]="DownstreamServiceError",e[e.BadRequest=70002]="BadRequest",e[e.InvalidCertificate=70251]="InvalidCertificate"}(o||(o={}));var a=(i(r={},o.PermissionDeniedError,"PermissionDeniedError: You lack permission to the resource and method you requested"),i(r,o.InvalidAccessToken,"Invalid Access Token"),i(r,o.AccessTokenExpired,"Access Token expired or expiration date invalid"),i(r,o.TooManyRequests,"TooManyRequests: Twilsock rate limit exceeded"),i(r,o.AuthorizationError,"Attempt to access resource where access is not allowed for given credentials"),i(r,o.ValidationError,"Validation error: request body validation fails"),i(r,o.ConnectionError,"Connection error"),i(r,o.SDK,"Something went wrong, error from inner SDK"),i(r,o.Unknown,"Unknown error"),i(r,o.Forbidden,"User is not authorized to perform the requested operation"),i(r,o.InvalidParams,"Invalid parameters"),i(r,o.NotFound,"Resource not found"),i(r,o.InvalidState,"Invalid state"),i(r,o.TooManySDKRequests,"Too many requests on the Flex SDK API"),i(r,o.TemporarilyDisabled,"The feature has been temporarily disabled"),i(r,o.NetworkError,"NetworkError: Not able to reach the server"),i(r,o.TwilsockConnectionError,"Twilsock connection error"),i(r,o.BadRequest,"BadRequest: The data in the request is unparsable"),i(r,o.InvalidCertificate,"Validation error: invalid certificate"),i(r,o.DownstreamServiceError,"Downstream error"),r),u=[o.PermissionDeniedError,o.InvalidAccessToken,o.AccessTokenExpired,o.TooManyRequests,o.AuthorizationError,o.ValidationError,o.BadRequest,o.InvalidCertificate]},function(e,t,n){"use strict";var r,o,i,a;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return u.a})),n.d(t,"f",(function(){return u.b})),function(e){e.Default="default",e.Error="error",e.RateLimiter="rate_limiter"}(r||(r={})),function(e){e.ClientInitialized="client_initialized",e.ClientDestroyed="client_destroyed",e.RateLimiterTriggered="rate_limiter_triggered",e.RateLimiterDisabledFeature="rate_limiter_disabled_feature"}(o||(o={})),function(e){e.Client="Client",e.RateLimiter="RateLimiter"}(i||(i={})),function(e){e.TwilioClient="twilio_client",e.Twilsock="twilsock"}(a||(a={}));var u=n(47)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c}));n(9),n(14),n(3);var r=Symbol.for("loggerFactory"),o=Symbol.for("NewableLogger"),i=Symbol.for("loglevelFactory"),a=Symbol.for("loggerDefaultPlugins"),u=Symbol.for("LoggerOptions"),c=Symbol.for("LoggerInstances")},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return c}));n(9),n(14),n(3);var r=Symbol.for("Authenticator"),o=Symbol.for("AuthenticatorDataContainer"),i=Symbol.for("AuthenticatorFactory"),a=Symbol.for("TwilioIdpUrl"),u=Symbol.for("twilioIdpUrlMockOptions"),c=Symbol.for("authenticatorMockOptions")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.EventEmitter})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i.a}));var r=n(59);n(27);function o(e,t,n,r){e.addListener(n,(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.emit.apply(t,[r].concat(n))}))}var i=n(60)},function(e,t,n){"use strict";(function(e,r){n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return f}));n(121),n(96),n(97),n(9),n(14),n(3),n(36),n(6),n(7),n(8);var o=n(0),i=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(t,n){if("object"!==a(t)||null===t||Array.isArray(t)){var u={module:Object(i.b)(e),severity:o.b.Error,source:Object(i.a)(r)};throw new o.c(o.a.InvalidParams,u,"".concat(n,", expected an object"))}}function c(t,n){if(u(t,n),function(e){try{JSON.stringify(e)}catch(e){return/^TypeError: Converting circular structure to JSON/.test(e)}return!1}(t)){var a={module:Object(i.b)(e),severity:o.b.Error,source:Object(i.a)(r)};throw new o.c(o.a.InvalidParams,a,"".concat(n,", expected an object without cycles"))}}function s(t,n){if("string"!=typeof t){var a={module:Object(i.b)(e),severity:o.b.Error,source:Object(i.a)(r)};throw new o.c(o.a.InvalidParams,a,"".concat(n,", expected a string"))}}function l(t,n){if(s(t,n),""===t.trim()){var a={module:Object(i.b)(e),severity:o.b.Error,source:Object(i.a)(r)};throw new o.c(o.a.InvalidParams,a,"".concat(n,", expected a string which is not empty"))}}function f(t,n){if(!(t in n)){var a={module:Object(i.b)(e),severity:o.b.Error,source:Object(i.a)(r)};throw new o.c(o.a.InvalidParams,a,"".concat(t," is not a valid key"))}}}).call(this,"src/utils","src/utils/assert.ts")},function(e,t){e.exports=require("core-js/modules/web.dom-collections.for-each.js")},function(e,t){e.exports=require("core-js/modules/es.array.concat.js")},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));n(9),n(14),n(3);var r=Symbol.for("RateLimiter"),o=Symbol.for("Map<RateLimiter>"),i=Symbol.for("Factory<RateLimiter>"),a=Symbol.for("cleanupRateLimiters()")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a}));n(9),n(14),n(3);var r=Symbol.for("NewableTwilsockClient"),o=Symbol.for("ProductID"),i=Symbol.for("Twilsock"),a=Symbol.for("TwilsockClientFactory")},function(e,t,n){"use strict";var r,o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),function(e){e[e.SyncConnectionError=45510]="SyncConnectionError",e[e.SyncAccessForbiddenError=54007]="SyncAccessForbiddenError",e[e.SyncMapNotFoundError=54200]="SyncMapNotFoundError",e[e.SyncMapItemNotFoundError=54201]="SyncMapItemNotFoundError",e[e.SyncInvalidMapItemDataError=54206]="SyncInvalidMapItemDataError",e[e.SyncInvalidMapItemKeyError=54209]="SyncInvalidMapItemKeyError",e[e.SyncNameNotFoundError=54300]="SyncNameNotFoundError",e[e.SyncNameAlreadyExistsError=54301]="SyncNameAlreadyExistsError",e[e.SyncInvalidNameError=54302]="SyncInvalidNameError"}(o||(o={}));var a=(i(r={},o.SyncConnectionError,"Sync connection error"),i(r,o.SyncAccessForbiddenError,"Sync access forbidden for identity"),i(r,o.SyncMapNotFoundError,"Sync map not found"),i(r,o.SyncInvalidMapItemDataError,"Invalid sync map item data"),i(r,o.SyncInvalidMapItemKeyError,"Invalid sync map item key"),i(r,o.SyncMapItemNotFoundError,"Sync map item not found"),i(r,o.SyncNameNotFoundError,"Sync unique name not found"),i(r,o.SyncNameAlreadyExistsError,"Sync unique name already exists"),i(r,o.SyncInvalidNameError,"Sync invalid unique name"),r)},function(e,t){e.exports=require("core-js/modules/es.object.keys.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r.b})),n.d(t,"b",(function(){return r.a})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e}));n(40);var r=n(12);function o(e,t){var n=e.get(r.b);return n.name=t,n}},function(e,t,n){"use strict";var r=n(43);n.d(t,"b",(function(){return r.b}));var o=n(66);n.d(t,"a",(function(){return o.a}))},function(e,t,n){"use strict";var r=n(23);n.d(t,"c",(function(){return r.d})),n.d(t,"b",(function(){return r.b})),n.d(t,"d",(function(){return r.f}));var o=n(75);n.d(t,"a",(function(){return o.a}))},function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptor.js")},function(e,t){e.exports=require("core-js/modules/es.symbol.iterator.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return u}));n(9),n(14),n(3);var r=Symbol.for("reThrowErrorWithCustomMessage"),o=Symbol.for("throwError"),i=Symbol.for("throwAndReportError"),a=Symbol.for("throwErrorFromErrorResponse"),u=Symbol.for("throwErrorFromResponse")},function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return f}));n(6),n(50),n(3),n(7),n(8),n(120),n(95),n(53),n(54);var r=n(20),o=n(30),i=new Map([[o.a.SyncConnectionError,r.a.ConnectionError],[o.a.SyncAccessForbiddenError,r.a.Forbidden],[o.a.SyncMapNotFoundError,r.a.NotFound],[o.a.SyncMapItemNotFoundError,r.a.NotFound],[o.a.SyncInvalidMapItemDataError,r.a.InvalidParams],[o.a.SyncInvalidMapItemKeyError,r.a.InvalidParams],[o.a.SyncNameNotFoundError,r.a.NotFound],[o.a.SyncNameAlreadyExistsError,r.a.InvalidState],[o.a.SyncInvalidNameError,r.a.InvalidParams]]);function a(e){return!!Object.values(o.a).find((function(t){return t===e}))}function u(e){return function(e){return!!Object.values(r.a).find((function(t){return t===e}))}(e)||a(e)}function c(e){return r.b.includes(e)}function s(e){return function(e){return r.c[e]}(e)||function(e){return o.b[e]}(e)||"Error"}function l(e){return i.get(e)||r.a.Unknown}function f(e){return!e||e===r.a.NetworkError||e===r.a.Unknown}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,o=n(100);n.d(t,"b",(function(){return o.TwilsockClient})),function(e){e.TokenExpired="tokenExpired",e.TokenAboutToExpire="tokenAboutToExpire",e.StateChanged="stateChanged",e.ConnectionError="connectionError",e.Connected="connected",e.Disconnected="disconnected"}(r||(r={}))},function(e,t){e.exports=require("core-js/modules/es.function.name.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(123),n(55),n(57),n(26),n(124),n(9),n(14),n(3),n(36),n(6),n(7),n(8),n(62),n(40),n(74);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t=/^\d{4}-\d{1,2}-\d{1,2}/,n=new RegExp("date|expiration","i"),o={};return Object.entries(e).forEach((function(i){var a=r(i,2),u=a[0],c=a[1];(function(e,t){return Object.prototype.hasOwnProperty.call(e,t)})(e,u)&&n.test(u)&&t.test(c)?o[u]=new Date(c):o[u]=c})),o}},function(e,t,n){"use strict";n.d(t,"a",(function(){return jr})),n.d(t,"b",(function(){return kr}));n(118);var r=n(1),o=n(23),i=(n(15),n(6),n(3),n(7),n(13),n(8),n(10),n(0)),a=n(25),u=n(4);n(55),n(64);function c(e){return{products:["flex"],resource:(t=e.redirectUrl,t.replace(/((Token|Expiration|Identity|Roles)=[^&]+[&]?)/g,"").replace(/[&?]$/,""))};var t}var s,l,f,d,p=n(17);function v(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,u,"next",e)}function u(e){v(i,r,o,a,u,"throw",e)}a(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,w(e,t,"get"))}function m(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,w(e,t,"set"),n),n}function w(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var g=Object(r.injectable)()((l=new WeakMap,f=new WeakMap,d=new WeakMap,s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),m(this,l,t),m(this,f,n(u.b.Auth)),m(this,d,r)}var t,n,s,v,w,g;return e=Object(r.inject)(p.c)(e,void 0,2)||e,e=Object(r.inject)(u.d)(e,void 0,1)||e,e=Object(r.inject)(o.a)(e,void 0,0)||e,t=e,(n=[{key:"getIdpUrl",value:(g=b(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(a.c)(t.redirectUrl,"redirect url"),n=c(t),r=y(this,l).accountSid,e.next=5,y(this,d).getIdpUrl(r,n);case 5:if((o=e.sent).location){e.next=9;break}throw y(this,f).error("No redirect location from /authenticate request, data: ",o),new i.d("Invalid response from /authenticate endpoint");case 9:return e.abrupt("return",o.location);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"validateToken",value:(w=b(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(this,l).accountSid,e.next=3,y(this,d).validateToken(n,{token:t},{token:t});case 3:return r=e.sent,e.abrupt("return",{roles:r.roles,valid:r.valid,dateExpired:r.expiration,identity:r.identity});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"refreshToken",value:(v=b(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(this,l).accountSid,e.next=3,y(this,d).refreshToken(n,{token:t});case 3:return r=e.sent,e.abrupt("return",{token:r.token,dateExpired:r.expiration});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})}])&&h(t.prototype,n),s&&h(t,s),e}()))||s,j=n(34);n(27);var k,O,S=n(5);function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,C(e,t,"set"),n),n}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var T,P,R,M,A,D,W,I,F,_,L,q,U,N,V,z,B,K,H,$=Object(r.injectable)()((O=new WeakMap,k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O.set(this,{writable:!0,value:void 0})}var t,n,r;return t=e,(n=[{key:"accountSid",get:function(){return function(e,t){return t.get?t.get.call(e):t.value}(e=this,C(e,O,"get"));var e},set:function(e){x(this,O,e)}}])&&E(t.prototype,n),r&&E(t,r),e}()))||k,G=new r.ContainerModule((function(e){e(o.d).to(g),e(o.a).to($).inSingletonScope(),e(o.b).toFactory((function(e){return function(t){return function(e,t){return e.get(o.a).accountSid=t,e.get(j.c)}(e.container,t)}})),e(o.f).toDynamicValue((function(e){return function(t){return function(e,t){var n=e.get(S.e).twilioServiceLoginUrl;return t?"".concat(n,"?localPort=").concat(t):n}(e.container,t)}}))})),J=n(49),Q=n(19),Y=n(11),X=n(24);function Z(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Z(i,r,o,a,u,"next",e)}function u(e){Z(i,r,o,a,u,"throw",e)}a(void 0)}))}}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,oe(e,t,"get"))}function re(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,oe(e,t,"set"),n),n}function oe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ie,ae,ue,ce,se,le,fe,de,pe,ve,be,he,ye=Object(r.injectable)()((P=new WeakMap,R=new WeakMap,M=new WeakMap,A=new WeakMap,D=new WeakMap,W=new WeakMap,I=new WeakMap,F=new WeakMap,_=new WeakMap,L=new WeakMap,q=new WeakMap,U=new WeakMap,N=new WeakMap,V=new WeakMap,z=new WeakMap,B=new WeakMap,K=new WeakMap,H=new WeakMap,T=function(){function e(t,n,r,o,a,c){var s,l,f,d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),D.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:[]}),_.set(this,{writable:!0,value:void 0}),L.set(this,{writable:!0,value:!0}),q.set(this,{writable:!0,value:void 0}),U.set(this,{writable:!0,value:void 0}),N.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),z.set(this,{writable:!0,value:(s=ee(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne(d,B).call(d)){e.next=3;break}return e.next=3,ne(d,H).call(d);case 3:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})}),B.set(this,{writable:!0,value:function(){var e=new Date;return(ne(d,A).getTime()-e.getTime())/6e4<=1}}),K.set(this,{writable:!0,value:(l=ee(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne(d,P)){e.next=5;break}return e.next=3,ne(d,H).call(d);case 3:e.next=6;break;case 5:re(d,U,!0);case 6:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})}),H.set(this,{writable:!0,value:(f=ee(regeneratorRuntime.mark((function e(){var t,n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(d,q).debug("Auto-updating token"),t=ne(d,P).get().accountSid){e.next=4;break}throw new i.d("Account sid not set");case 4:return o=ne(d,R).call(d,t),e.prev=5,e.next=8,o.refreshToken(d.token);case 8:a=e.sent,(r=a.dateExpired).getTime()===ne(d,A).getTime()&&(ne(d,q).warn("Token expiration not extended, because max lifetime reached"),ne(d,N).emit(Q.a.TokenMaxLifetimeReached,a.dateExpired)),n=a.token,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),ne(d,q).error("Failed to refresh token",e.t0),ne(d,N).emit(Q.a.TokenAutoUpdateFailed);case 18:if(ne(d,L)){e.next=21;break}return ne(d,q).trace("AutoUpdateToken, session destroyed after refreshToken"),e.abrupt("return");case 21:if(!n||!r){e.next=33;break}return e.prev=22,e.next=25,d.updateToken(n);case 25:re(d,A,r),ne(d,q).info("Token auto-updated"),e.next=33;break;case 29:e.prev=29,e.t1=e.catch(22),ne(d,q).error("Failed to auto-update token",e.t1),ne(d,N).emit(Q.a.TokenAutoUpdateFailed);case 33:case"end":return e.stop()}}),e,null,[[5,14],[22,29]])}))),function(){return f.apply(this,arguments)})}),re(this,D,t),re(this,W,n),re(this,I,o),re(this,R,r),re(this,q,a(u.b.Session)),ne(this,q).debug("Session constructed"),re(this,N,c)}var t,n,o,a,c,s;return e=Object(r.inject)(X.b)(e,void 0,5)||e,e=Object(r.inject)(u.d)(e,void 0,4)||e,e=Object(r.inject)(S.b)(e,void 0,3)||e,e=Object(r.inject)(j.b)(e,void 0,2)||e,e=Object(r.inject)(Q.b)(e,void 0,1)||e,e=Object(r.inject)(Y.b)(e,void 0,0)||e,t=e,(n=[{key:"init",value:(s=ee(regeneratorRuntime.mark((function e(t){var n,r,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(this,q).debug("will initialize session with token: ",t),ne(this,q).debug("will update token: ",ne(this,W).autoUpdateToken),re(this,M,t),e.next=5,ne(this,D).connect(t);case 5:return ne(this,W).autoUpdateToken&&ne(this,D).addListener(Y.a.TokenAboutToExpire,ne(this,K)),e.t0=re,e.t1=this,e.t2=P,e.next=11,ne(this,I).call(this,t);case 11:return e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),n=ne(this,P).get().accountSid,r=ne(this,R).call(this,n),e.next=17,r.validateToken(ne(this,M));case 17:if(o=e.sent,re(this,F,o.roles),re(this,A,o.dateExpired),re(this,_,o.identity),ne(this,W).autoUpdateToken&&(re(this,U,ne(this,U)||ne(this,B).call(this)),re(this,V,setInterval((function(){return ne(i,z).call(i)}),15e3))),!ne(this,U)){e.next=25;break}return e.next=25,ne(this,H).call(this);case 25:return e.abrupt("return",Promise.resolve());case 26:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"updateToken",value:(c=ee(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(this,D).updateToken(t);case 2:re(this,M,t),ne(this,q).debug("new token set");case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"destroy",value:(a=ee(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(this,V)&&clearInterval(ne(this,V)),re(this,L,!1),ne(this,D).removeListener(Y.a.TokenAboutToExpire,ne(this,K)),e.next=5,ne(this,D).destroy();case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"token",get:function(){return ne(this,M)}},{key:"roles",get:function(){return ne(this,F)}},{key:"addListener",value:function(e,t){return ne(this,N).on(e,t),this}},{key:"removeListener",value:function(e,t){return ne(this,N).removeListener(e,t),this}}])&&te(t.prototype,n),o&&te(t,o),e}()))||T,me=n(76),we=new r.ContainerModule((function(e){e(J.b).to(ye).inSingletonScope(),e(J.a).toConstantValue(Object(me.a)())})),ge=n(16),je=(n(26),n(31),n(72),n(62),n(9),n(14),n(36),n(74),n(40),n(35),n(32)),ke=n(21),Oe=n(69);function Se(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){xe(i,r,o,a,u,"next",e)}function u(e){xe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Me(e,t,"get"))}function Re(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Me(e,t,"set"),n),n}function Me(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ae,De,We,Ie,Fe,_e,Le=(ie=Object(r.injectable)(),ae=Object(r.postConstruct)(),ie((se=new WeakMap,le=new WeakMap,fe=new WeakMap,de=new WeakMap,pe=new WeakMap,ve=new WeakMap,be=new WeakMap,he=new WeakMap,Ae=(ce=function(){function e(t,n,r,o,i,a,c,s){var l,f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:void 0}),fe.set(this,{writable:!0,value:void 0}),de.set(this,{writable:!0,value:void 0}),pe.set(this,{writable:!0,value:void 0}),ve.set(this,{writable:!0,value:void 0}),be.set(this,{writable:!0,value:void 0}),he.set(this,{writable:!0,value:(l=Ce(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Pe(f,pe),n=t.createEventGroup(ke.b.Default),e.next=5,n.addEvents({eventName:ke.c.ClientDestroyed,eventSource:ke.d.Client});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Pe(f,fe).error("Failed to send telemetry destroy event",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(){return l.apply(this,arguments)})}),Re(this,se,t),Re(this,le,n),this.config={account:r},Re(this,de,o),Re(this,pe,i),Re(this,fe,a(u.b.Client)),Re(this,ve,c),Re(this,be,s)}var t,n,o,i,a;return e=Object(r.inject)(Oe.a)(e,void 0,7)||e,e=Object(r.inject)(X.b)(e,void 0,6)||e,e=Object(r.inject)(u.d)(e,void 0,5)||e,e=Object(r.inject)(ke.e)(e,void 0,4)||e,e=Object(r.inject)(je.b)(e,void 0,3)||e,e=Object(r.inject)(S.c)(e,void 0,2)||e,e=Object(r.inject)(Y.b)(e,void 0,1)||e,e=Object(r.inject)(Q.c)(e,void 0,0)||e,t=e,(n=[{key:"setupProxies",value:function(){Object(X.c)(Pe(this,le),Pe(this,ve),Y.a.TokenAboutToExpire,ge.a.TokenAboutToExpire),Object(X.c)(Pe(this,le),Pe(this,ve),Y.a.TokenExpired,ge.a.TokenExpired),Object(X.c)(Pe(this,le),Pe(this,ve),Y.a.TokenUpdated,ge.a.TokenUpdated),Object(X.c)(Pe(this,le),Pe(this,ve),Y.a.ConnectionError,ge.a.ConnectionLost),Object(X.c)(Pe(this,le),Pe(this,ve),Y.a.Connected,ge.a.ConnectionRestored),Object(X.c)(Pe(this,le),Pe(this,ve),Y.a.Disconnected,ge.a.Disconnected),Object(X.c)(Pe(this,se),Pe(this,ve),Q.a.TokenAutoUpdateFailed,ge.a.TokenAutoUpdateFailed),Object(X.c)(Pe(this,se),Pe(this,ve),Q.a.TokenMaxLifetimeReached,ge.a.TokenMaxLifetimeReached)}},{key:"updateToken",value:(a=Ce(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(this,se).updateToken(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"destroy",value:(i=Ce(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(this,he).call(this);case 2:return Pe(this,fe).debug("client log out"),e.next=5,Pe(this,se).destroy();case 5:Pe(this,ve).removeAllListeners(),Pe(this,be).call(this);case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"roles",get:function(){return Se(Pe(this,se).roles)}},{key:"token",get:function(){return Pe(this,se).token}},{key:"createTelemetryClient",value:function(e){return Pe(this,de).call(this,e)}},{key:"addListener",value:function(e,t){return Pe(this,ve).on(e,t),this}},{key:"removeListener",value:function(e,t){return Pe(this,ve).removeListener(e,t),this}}])&&Te(t.prototype,n),o&&Te(t,o),e}()).prototype,De="setupProxies",We=[ae],Ie=Object.getOwnPropertyDescriptor(ce.prototype,"setupProxies"),Fe=ce.prototype,_e={},Object.keys(Ie).forEach((function(e){_e[e]=Ie[e]})),_e.enumerable=!!_e.enumerable,_e.configurable=!!_e.configurable,("value"in _e||_e.initializer)&&(_e.writable=!0),_e=We.slice().reverse().reduce((function(e,t){return t(Ae,De,e)||e}),_e),Fe&&void 0!==_e.initializer&&(_e.value=_e.initializer?_e.initializer.call(Fe):void 0,_e.initializer=void 0),void 0===_e.initializer&&(Object.defineProperty(Ae,De,_e),_e=null),ue=ce))||ue),qe=n(77),Ue=n(78),Ne=new r.ContainerModule((function(e){e(ge.b).to(Ue.a).inSingletonScope(),e(ge.d).to(Le).inSingletonScope(),e(ge.c).toProvider((function(e){return function(t,n){return Object(qe.a)(e.container,t,n)}}))})),Ve=n(37),ze=n(20),Be=n(38),Ke=n(52);function He(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function $e(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){He(i,r,o,a,u,"next",e)}function u(e){He(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Ge(){return(Ge=$e(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.get(ke.f),i=n.wrappedError,a=Object(Be.c)(n.code),e.next=6,o.addErrorEvent({eventName:"error_reported",error:{code:n.code,debugger:a,message:n.message,module:n.metadata.module,reporter:"flex-sdk",resourceSid:n.metadata.resourceSid,severity:n.metadata.severity,source:n.metadata.source||"flex-sdk",stackTrace:n.stack,unhandled:n.metadata.unhandled,wrappedErrorCode:null==i?void 0:i.code,wrappedErrorMessage:null!==(r=null==i?void 0:i.message)&&void 0!==r?r:void 0}});case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),c=t.get(u.d),c(u.b.Error).debug("Failed to report the error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Je(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Je(i,r,o,a,u,"next",e)}function u(e){Je(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Ye(e,t,n,r){if(r instanceof Ke.a)return r;e&&Object(Be.f)(e)||console.warn("Unknown error code");var o=e;return Object(Be.e)(e)&&(o=Object(Be.b)(e)),new Ke.a(o,t,n,r)}function Xe(e,t,n,r){throw Ye(e,t,n,r)}function Ze(e,t,n,r,o){var i=Ye(t,n,r,o);!function(e,t){Ge.apply(this,arguments)}(e,i),Xe(t,n,r,i)}function et(e,t){throw new Ke.a(e.code,e.metadata,t,e.wrappedError)}function tt(e,t){if(e instanceof Ke.a)throw e;Xe(e.code?e.code:ze.a.Unknown,t,e.message)}function nt(){return(nt=Qe(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:(o=e.sent).message=r||o.message,tt(o,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt=new r.ContainerModule((function(e){e(i.i).toDynamicValue((function(){return function(e,t,n,r){return Xe(e,t,n,r)}})).inSingletonScope(),e(Ve.b).toDynamicValue((function(e){return function(t,n,r,o){return Ze(e.container,t,n,r,o)}})).inSingletonScope(),e(Ve.c).toDynamicValue((function(){return function(e,t){return tt(e,t)}})).inSingletonScope(),e(Ve.d).toDynamicValue((function(){return function(e,t,n){return function(e,t,n){return nt.apply(this,arguments)}(e,t,n)}})).inSingletonScope(),e(Ve.a).toConstantValue(et)})),ot=n(59),it=n(60),at=new r.ContainerModule((function(e){e(it.a).toDynamicValue((function(){return new ot.EventEmitter}))})),ut=n(103),ct=n(18);n(44),n(45);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft,dt,pt,vt,bt=function(){var e;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({twilioServiceLoginUrl:"https://flex.twilio.com/admin"},null===(e=window.__TWILIO_FLEX_SDK__)||void 0===e?void 0:e.environmentConfig)},ht=(n(99),["accountSid"]);function yt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function mt(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,kt(e,t,"get"))}function jt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,kt(e,t,"set"),n),n}function kt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ot=Object(r.injectable)()((dt=new WeakMap,pt=new WeakMap,vt=new WeakMap,ft=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dt.set(this,{writable:!0,value:void 0}),pt.set(this,{writable:!0,value:void 0}),vt.set(this,{writable:!0,value:void 0}),jt(this,dt,t),jt(this,pt,n)}var t,n,o,i,u;return e=Object(r.inject)(ct.d)(e,void 0,1)||e,e=Object(r.inject)(ct.e)(e,void 0,0)||e,t=e,(n=[{key:"get",value:function(){return gt(this,dt).get()}},{key:"set",value:(i=regeneratorRuntime.mark((function e(t){var n,r,o,i,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gt(this,dt).get(),r=n.accountSid,o=yt(n,ht),Object.keys(t).map((function(e){return Object(a.a)(e,o)})),i=function(){return gt(c,pt).call(c,r,t)},e.next=6,this.updateInCallOrder(i);case 6:return u=e.sent,gt(this,dt).set(u),e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){mt(o,n,r,a,u,"next",e)}function u(e){mt(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return u.apply(this,arguments)})},{key:"updateInCallOrder",value:function(e){return gt(this,vt)?jt(this,vt,gt(this,vt).then((function(){return e()}))):jt(this,vt,e()),gt(this,vt)}}])&&wt(t.prototype,n),o&&wt(t,o),e}()))||ft,St=n(104);function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var Pt=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,r){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.get(p.a),e.next=3,o.updateConfiguration(xt({accountSid:n},r));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Tt(i,r,o,a,u,"next",e)}function u(e){Tt(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),Rt=n(79),Mt=n(80);var At=n(81),Dt=n(107),Wt=new r.ContainerModule((function(e){e(S.c).to(Ot).inSingletonScope(),e(S.d).to(Rt.a).inSingletonScope(),e(S.b).toProvider((function(e){return Object(ut.a)(e.container)})),e(ct.d).toDynamicValue((function(e){return function(t,n){return Pt(e.container,t,n)}})),e(S.e).toDynamicValue(bt),e(S.i).toProvider((function(e){return function(t){return Object(St.a)(e.container,t)}})),e(S.f).toProvider(Dt.a),e(ct.i).toDynamicValue((function(e){return Object(At.a)(e.container)})),e(S.g).toDynamicValue((function(e){return Object(Mt.a)(e.container)})),e(S.a).toConstantValue({query:{UiVersion:void 0}})})),It=n(29),Ft=n(39),_t=n(108);var Lt,qt,Ut=new r.ContainerModule((function(e){e(It.a).toConstructor(Ft.b),e(It.b).toConstantValue("flex"),e(It.d).to(_t.a).inSingletonScope(),e(It.c).toFactory((function(e){return function(t,n,r){return function(e,t,n,r){return new(e.get(It.a))(t,n,r)}(e.container,t,n,r)}}))})),Nt=n(109),Vt=Symbol.for("Rbac"),zt=(n(53),n(54),new r.ContainerModule((function(e){e(Vt).toDynamicValue((function(e){return{requiredRole:Object(Nt.a)(e.container),hasRole:(t=e.container,function(e){return t.get(Q.c).roles.includes(e)})};var t}))}))),Bt=(n(50),n(61)),Kt=n(22),Ht=n(82),$t=n(83);function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Yt(e,t,"get"))}function Qt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Yt(e,t,"set"),n),n}function Yt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Xt,Zt,en,tn=Object(r.injectable)()((qt=new WeakMap,Lt=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qt.set(this,{writable:!0,value:void 0}),Gt(this,"trace",(function(){var e;(e=Jt(n,qt)).trace.apply(e,arguments)})),Gt(this,"debug",(function(){var e;(e=Jt(n,qt)).debug.apply(e,arguments)})),Gt(this,"log",(function(){var e;(e=Jt(n,qt)).debug.apply(e,arguments)})),Gt(this,"info",(function(){var e;(e=Jt(n,qt)).info.apply(e,arguments)})),Gt(this,"warn",(function(){var e;(e=Jt(n,qt)).warn.apply(e,arguments)})),Gt(this,"error",(function(){var e;(e=Jt(n,qt)).error.apply(e,arguments)})),Gt(this,"setLevel",(function(e){Jt(n,qt).setLevel(e)})),Gt(this,"getLevel",(function(){return Jt(n,qt).getLevel()})),Qt(this,qt,t)}))||Lt,nn=function(e){return e<10?"0".concat(e):"".concat(e)},rn=function(e){var t=e.getFullYear(),n=nn(e.getMonth()+1),r=nn(e.getDate()),o=nn(e.getHours()),i=nn(e.getMinutes()),a=nn(e.getSeconds()),u=nn(e.getMilliseconds());return"".concat(t,"-").concat(n,"-").concat(r," ").concat(o,":").concat(i,":").concat(a,".").concat(u)},on=[function(e){return function(t,n,r){return function(o){for(var i=o instanceof u.a,a=arguments.length,c=new Array(a>1?a-1:0),s=1;s<a;s++)c[s-1]=arguments[s];i||c.unshift(o);var l=i?o:new u.a(r,t),f=e(t,n,r);return f.apply(void 0,[l].concat(c))}}},function(e){return function(t,n,r){return function(o){for(var i=e(t,n,r),a=arguments.length,u=new Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];return i.apply(void 0,[o].concat(u))}}},function(e){return function(t,n,r){return function(o){for(var i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];o.data||(o.data=a);var c=e(t,n,r);return c.apply(void 0,[o].concat(a))}}},function(e){return function(t,n,r){return function(o){for(var i=rn(o.timestamp),a=o.severity.toUpperCase(),u="[".concat(i,"] Flex SDK → ").concat(r," (").concat(a,"): "),c=e(t,n,r),s=arguments.length,l=new Array(s>1?s-1:0),f=1;f<s;f++)l[f-1]=arguments[f];return c.apply(void 0,[u].concat(l))}}}].reverse(),an=function(e){return on.forEach((function(t){var n=e.methodFactory;e.methodFactory=t(n)})),e.setLevel(e.getLevel()),e},un=new r.ContainerModule((function(e){e(Kt.e).toConstantValue(Bt.getLogger),e(Kt.b).toFactory((function(e){return Object(Ht.a)(e.container)})),e(Kt.f).toConstructor(tn),e(Kt.a).toConstantValue([an]),e(Kt.d).toConstantValue(Object($t.a)()),e(Kt.c).toConstantValue(new Map)})),cn=n(12);function sn(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,pn(e,t,"get"))}function dn(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,pn(e,t,"set"),n),n}function pn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var vn,bn,hn,yn,mn=Object(r.injectable)()((Zt=new WeakMap,en=new WeakMap,Xt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Zt.set(this,{writable:!0,value:void 0}),en.set(this,{writable:!0,value:void 0}),dn(this,Zt,t),dn(this,en,n(u.c.TelemetryClient))}var t,n,o,i,a;return e=Object(r.inject)(u.d)(e,void 0,1)||e,e=Object(r.inject)(cn.c)(e,void 0,0)||e,t=e,(n=[{key:"createEventGroup",value:function(e){return fn(this,en).debug("creating event group with name: ",e),fn(this,Zt).call(this,this,e)}},{key:"setSessionData",value:(i=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sessionData=t;case 1:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){sn(o,n,r,a,u,"next",e)}function u(e){sn(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})}])&&ln(t.prototype,n),o&&ln(t,o),e}()))||Xt;function wn(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wn(i,r,o,a,u,"next",e)}function u(e){wn(i,r,o,a,u,"throw",e)}a(void 0)}))}}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Sn(e,t,"get"))}function On(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Sn(e,t,"set"),n),n}function Sn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var En,xn,Cn,Tn,Pn,Rn,Mn,An,Dn,Wn,In,Fn,_n,Ln,qn,Un=Object(r.injectable)()((bn=new WeakMap,hn=new WeakMap,yn=new WeakMap,vn=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bn.set(this,{writable:!0,value:void 0}),hn.set(this,{writable:!0,value:void 0}),yn.set(this,{writable:!0,value:void 0}),On(this,bn,t),On(this,hn,n),On(this,yn,r)}var t,n,o,i,a;return e=Object(r.inject)(Y.b)(e,void 0,2)||e,e=Object(r.inject)(cn.e)(e,void 0,1)||e,e=Object(r.inject)(cn.f)(e,void 0,0)||e,t=e,(n=[{key:"addEvents",value:(a=gn(regeneratorRuntime.mark((function e(){var t,n,r,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=i.length,r=new Array(n),o=0;o<n;o++)r[o]=i[o];return e.abrupt("return",(t=kn(this,bn)).processEvents.apply(t,[this.telemetryClient.name,this.name,this.telemetryClient.sessionData].concat(r)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"addErrorEvent",value:(i=gn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=kn(this,yn).isConnected(),kn(this,hn).reportErrors&&n){e.next=4;break}return e.abrupt("return",{eventsSucceeded:0,eventsFailed:0,eventsNotProcessed:1});case 4:return e.abrupt("return",kn(this,bn).processEvents("flex-ui-sdk-error-v1",this.name,this.telemetryClient.sessionData,t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&jn(t.prototype,n),o&&jn(t,o),e}()))||vn,Nn=n(111),Vn=n(84),zn={timeWindow:6e4,maxHitsInTimeWindow:100,disableFeatureThreshold:5},Bn=new r.ContainerModule((function(e){e(cn.a).toFactory((function(e){return function(t){return Object(je.a)(e.container,t)}})),e(cn.b).to(mn),e(cn.c).toFactory((function(e){return function(t,n){return function(e,t,n){var r=e.get(cn.d);return r.name=n,r.telemetryClient=t,r}(e.container,t,n)}})),e(cn.d).to(Un),e(cn.f).to(Nn.a).inSingletonScope(),e(cn.e).toConstantValue(Object(Vn.a)()),e(cn.g).toConstantValue(zn)})),Kn=n(47),Hn=new r.ContainerModule((function(e){e(Kn.a).toDynamicValue((function(e){return Object(je.a)(e.container,"sdk-v1")})).inSingletonScope(),e(Kn.b).toDynamicValue((function(e){return e.container.get(Kn.a).createEventGroup()})).inSingletonScope()})),$n=n(85),Gn=n(86);n(96);function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Xn(e,t,"get"))}function Yn(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Xn(e,t,"set"),n),n}function Xn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Zn,er,tr={rateLimiterErrorCode:i.a.TooManySDKRequests,disableFeatureErrorCode:i.a.TemporarilyDisabled,disableFeatureThreshold:Number.MAX_VALUE},nr=Object(r.injectable)()((xn=new WeakMap,Cn=new WeakMap,Tn=new WeakMap,Pn=new WeakMap,Rn=new WeakMap,Mn=new WeakMap,An=new WeakMap,Dn=new WeakMap,Wn=new WeakMap,In=new WeakMap,Fn=new WeakMap,_n=new WeakMap,Ln=new WeakMap,qn=new WeakMap,En=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xn.set(this,{writable:!0,value:void 0}),Cn.set(this,{writable:!0,value:0}),Tn.set(this,{writable:!0,value:0}),Pn.set(this,{writable:!0,value:void 0}),Rn.set(this,{writable:!0,value:void 0}),Mn.set(this,{writable:!0,value:void 0}),An.set(this,{writable:!0,value:void 0}),Dn.set(this,{writable:!0,value:function(){Yn(o,Cn,0),Qn(o,Mn).trace('rate limiter window reset. name="'.concat(o.name,'"'))}}),Wn.set(this,{writable:!0,value:function(){Yn(o,Cn,Qn(o,Cn)+1)}}),In.set(this,{writable:!0,value:function(){Qn(o,Cn)-1===Qn(o,xn).maxHitsInTimeWindow&&Yn(o,Tn,Qn(o,Tn)+1)}}),Fn.set(this,{writable:!0,value:function(){Qn(o,Tn)>=Qn(o,xn).disableFeatureThreshold&&(Qn(o,Mn).warn('temporarily disabled. name="'.concat(o.name,'", hitCount=').concat(Qn(o,Cn),", windowCount=").concat(Qn(o,Tn))),Qn(o,An).call(o,i.a.TemporarilyDisabled,void 0,"Feature disabled by rate limiter ".concat(o.name))),o.hitCountInTimeWindow>o.maxHitsInTimeWindow&&(Qn(o,Mn).warn('rate limiter hit. name="'.concat(o.name,'", hitCount=').concat(Qn(o,Cn))),Qn(o,An).call(o,i.a.TooManySDKRequests,void 0,"Request blocked by rate limiter ".concat(o.name)))}}),_n.set(this,{writable:!0,value:function(){Qn(o,Cn)-1===Qn(o,xn).maxHitsInTimeWindow&&(Qn(o,Tn)===Qn(o,xn).disableFeatureThreshold?Qn(o,qn).call(o):Qn(o,Tn)<Qn(o,xn).disableFeatureThreshold&&Qn(o,Ln).call(o))}}),Ln.set(this,{writable:!0,value:function(){Qn(o,Rn).addEvents({eventName:ke.c.RateLimiterTriggered,eventSource:ke.d.RateLimiter,resource:{id:Qn(o,xn).name}})}}),qn.set(this,{writable:!0,value:function(){Qn(o,Rn).addEvents({eventName:ke.c.RateLimiterDisabledFeature,eventSource:ke.d.RateLimiter,resource:{id:Qn(o,xn).name}})}}),Yn(this,Rn,t.createEventGroup(ke.b.RateLimiter)),Yn(this,Mn,n(u.b.RateLimiter)),Yn(this,An,r)}var t,n,o;return e=Object(r.inject)(i.i)(e,void 0,2)||e,e=Object(r.inject)(u.d)(e,void 0,1)||e,e=Object(r.inject)(ke.e)(e,void 0,0)||e,t=e,(n=[{key:"setup",value:function(e){if(Qn(this,xn))throw new i.d("RateLimiter is already initialized");if(e.timeWindow<100)throw new i.d("timeWindow should be >= 100");Yn(this,xn,{maxHitsInTimeWindow:e.maxHitsInTimeWindow,disableFeatureThreshold:e.disableFeatureThreshold||tr.disableFeatureThreshold,timeWindow:e.timeWindow,rateLimiterErrorCode:e.rateLimiterErrorCode||tr.rateLimiterErrorCode,disableFeatureErrorCode:e.disableFeatureErrorCode||tr.disableFeatureErrorCode,name:e.name}),Yn(this,Pn,setInterval(Qn(this,Dn),this.timeWindow))}},{key:"maxHitsInTimeWindow",get:function(){return Qn(this,xn).maxHitsInTimeWindow}},{key:"hitCountInTimeWindow",get:function(){return Qn(this,Cn)}},{key:"name",get:function(){return Qn(this,xn).name}},{key:"timeWindow",get:function(){return Qn(this,xn).timeWindow}},{key:"check",value:function(){if(!Qn(this,xn))throw new i.d("Rate limiter not set up, call setup()");Qn(this,Wn).call(this),Qn(this,In).call(this),Qn(this,_n).call(this),Qn(this,Fn).call(this)}},{key:"cleanup",value:function(){clearInterval(Qn(this,Pn))}}])&&Jn(t.prototype,n),o&&Jn(t,o),e}()))||En,rr=n(28),or=new r.ContainerModule((function(e){e(rr.d).to(nr),e(rr.c).toConstantValue(new Map),e(rr.b).toFactory((function(e){return function(t){return Object(Gn.a)(e.container,t)}})),e(rr.a).toDynamicValue((function(e){return function(){return Object($n.a)(e.container)}}))})),ir=(n(95),n(66)),ar=function(e){var t=e.container;return function(){t.get(u.d)(u.b.Storage).debug("Clearing out Flex SDK local storage cache"),Object.values(ir.a).forEach((function(e){localStorage.removeItem(e)}))}};function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,lr(e,t,"get"))}function sr(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,lr(e,t,"set"),n),n}function lr(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var fr,dr=Object(r.injectable)()((er=new WeakMap,Zn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),er.set(this,{writable:!0,value:void 0}),sr(this,er,t(u.b.Storage))}var t,n,o;return e=Object(r.inject)(u.d)(e,void 0,0)||e,t=e,(n=[{key:"getCachedItem",value:function(e){var t=localStorage.getItem(e);if(t){var n=JSON.parse(t);return(new Date).getTime()>n.expiry?(localStorage.removeItem(e),void cr(this,er).debug("The ".concat(e," cache item has expired"))):n.value}cr(this,er).debug("The ".concat(e," cache item is not available"))}},{key:"setCachedItem",value:function(e,t){var n={value:t,expiry:(new Date).getTime()+864e5};try{localStorage.setItem(e,JSON.stringify(n))}catch(e){cr(this,er).error(e)}cr(this,er).debug("Cached ".concat(e))}}])&&ur(t.prototype,n),o&&ur(t,o),e}()))||Zn,pr=n(43),vr=new r.ContainerModule((function(e){e(pr.b).to(dr).inSingletonScope(),e(pr.a).toDynamicValue(ar)})),br=n(87),hr=n(88),yr=n(89),mr=n(90),wr=n(91),gr=n(92);function jr(){var e=new r.Container;return e.load(G),e.load(Wt),e.load(we),e.load(Ne),e.load(rt),e.load(at),e.load(Ut),e.load(zt),e.load(un),e.load(Bn),e.load(Hn),e.load(or),e.load(vr),function(e){e.bind(p.f).to(wr.a).inSingletonScope(),e.bind(p.d).to(gr.a).inSingletonScope(),br.a.with(e),hr.a.with(e),yr.a.with(e),mr.a.with(e)}(e),e}function kr(){return fr||(fr=jr()),fr}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));n(9),n(14),n(3);var r=Symbol.for("localStorage"),o=Symbol.for("clearCache")},function(e,t){e.exports=require("core-js/modules/es.array.filter.js")},function(e,t){e.exports=require("core-js/modules/es.object.get-own-property-descriptors.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r,o=n(0);!function(e){e.HostedFlex="hosted-flex",e.Basic="basic"}(r||(r={}));var i=function(e,t){if(e===r.Basic)return new Headers({Authorization:"Basic ".concat(btoa("token:".concat(t)),")"),"Content-Type":"application/json"});if(e===r.HostedFlex)return new Headers({"x-flex-jwe":t,"Content-Type":"application/json"});throw new o.c(o.a.InvalidParams)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));n(9),n(14),n(3);var r=Symbol.for("TelemetrySdkClient"),o=Symbol.for("TelemetrySdkErrorEventGroup")},function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return m}));n(26),n(9),n(14),n(3),n(36),n(6),n(7),n(8);var r=n(93),o=n.n(r),i=n(94),a=n.n(i),u=n(105),c=n.n(u),s=n(106),l=n.n(s),f=n(25);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function e(t,n){var r=[];return t.forEach((function(t){var o;o=Array.isArray(t)?e(t,n):"object"===d(t)?v(t,n):t,r.push(o)})),r},v=function e(t,n){return l()(t,(function(t,r,o){Array.isArray(r)?t["".concat(n(o))]=p(r,n):r instanceof Object&&!(r instanceof Date)?t["".concat(n(o))]=e(r,n):t["".concat(n(o))]=r}),{})},b=function(e,t){return c()(e,(function(e,n){return t(n)}))},h=function(e){return b(e,(function(e){return a()(e)}))},y=function(e){return b(e,(function(e){return o()(e)}))},m=function(e){return Object(f.b)(e,"key-value dictionary"),v(e,(function(e){return a()(e)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));n(9),n(14),n(3);var r=Symbol.for("Session"),o=Symbol.for("SessionOptions")},function(e,t){e.exports=require("core-js/modules/es.map.js")},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));n(9),n(14),n(3);var r=Symbol.for("Client"),o=Symbol.for("ClientProvider"),i=Symbol.for("ClientOptions"),a=Symbol.for("ClientMockOptions")},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n(27),n(6),n(3),n(7),n(13),n(8),n(56),n(57),n(63),n(50),n(31),n(9),n(44),n(35),n(26),n(45),n(14),n(36);var r=n(38),o=n(65);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)})(e)}function d(e,t,n){return(d=p()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&v(o,n.prototype),o}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,m(e,t,"get"))}function y(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,m(e,t,"set"),n),n}function m(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var w=new WeakMap,g=new WeakMap,j=new WeakMap,k=new WeakMap,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(O,e);var t,n,i,f,d,m=(t=O,n=p(),function(){var e,r=b(t);if(n){var o=b(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function O(e,t,n,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),a=m.call(this,"".concat(Object(r.a)(e)+(void 0!==n?": ".concat(n):"")," (").concat(e,")")),w.set(l(a),{writable:!0,value:void 0}),g.set(l(a),{writable:!0,value:void 0}),j.set(l(a),{writable:!0,value:void 0}),k.set(l(a),{writable:!0,value:void 0}),y(l(a),g,e),y(l(a),w,n),y(l(a),k,t||{severity:o.a.Error}),y(l(a),j,i),Object.setPrototypeOf(l(a),O.prototype),a}return i=O,(f=[{key:"code",get:function(){return h(this,g)}},{key:"details",get:function(){return h(this,w)}},{key:"wrappedError",get:function(){return h(this,j)}},{key:"metadata",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h(this,k))}}])&&c(i.prototype,f),d&&c(i,d),O}(f(Error))},function(e,t){e.exports=require("core-js/modules/es.array.includes.js")},function(e,t){e.exports=require("core-js/modules/es.string.includes.js")},function(e,t){e.exports=require("core-js/modules/es.regexp.exec.js")},function(e,t){e.exports=require("core-js/modules/es.object.get-prototype-of.js")},function(e,t){e.exports=require("core-js/modules/es.regexp.to-string.js")},function(e,t,n){"use strict";var r,o,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),function(e){e.Client="flex:Client",e.Error="flex:Error",e.Session="flex:Session",e.Twilsock="flex:Twilsock",e.Auth="flex:Auth",e.Config="flex:Config",e.RateLimiter="flex:RateLimiter",e.Sync="flex:Sync",e.SyncAdapter="flex:SyncAdapter",e.QueueStats="flex:QueueStats",e.Storage="flex:Storage"}(r||(r={})),function(e){e.Twilsock="twilsock"}(o||(o={})),function(e){e.TelemetryClient="TelemetryClient",e.TelemetryProcessor="TelemetryProcessor",e.TelemetrySdkClient="TelemetrySdkClient"}(i||(i={}))},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(9),n(14),n(3);var r=Symbol.for("eventEmitter")},function(e,t){e.exports=require("loglevel")},function(e,t){e.exports=require("core-js/modules/es.array.slice.js")},function(e,t){e.exports=require("core-js/modules/es.reflect.construct.js")},function(e,t){e.exports=require("core-js/modules/es.string.replace.js")},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Info="info"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.AccountConfig="FLEX_SDK_CACHE_ACCOUNT_CONFIG",e.PublicConfig="FLEX_SDK_CACHE_PUBLIC_CONFIG",e.FeaturesConfig="FLEX_SDK_CACHE_FEATURES_CONFIG"}(r||(r={}))},function(e){e.exports=JSON.parse('{"a":"0.13.0"}')},function(e,t){e.exports=require("lodash/cloneDeep")},function(e,t,n){"use strict";var r=n(28);n.d(t,"b",(function(){return r.b})),n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(15),n(3),n(10),n(7),n(6),n(8),n(9),n(14),n(36);var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,c,"next",e)}function c(e){i(a,r,o,u,c,"throw",e)}u(void 0)}))}}function u(e,t,n){return"exponential"===n?Math.pow(1.5,e)*t:(e+1)*t}function c(e){return s.apply(this,arguments)}function s(){return(s=a(regeneratorRuntime.mark((function e(t){var n,i,a,c,s,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,i=9e5,a=void 0!==t.initialDelay?t.initialDelay:100,c=void 0!==t.maxAttempts?t.maxAttempts:3,s=t.backoff||"exponential",!(c<1)){e.next=7;break}throw new r.d("The value of max retry attempts has to be bigger than 0");case 7:f=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.logger&&n>0&&t.logger.debug("Retry attempt: ",n),e.next=4,t.functionToRetry();case 4:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 8:if(e.prev=8,e.t1=e.catch(0),t.retryCondition(e.t1)){e.next=12;break}return e.abrupt("return",{v:Promise.reject(e.t1)});case 12:if(!(n>=c-1)){e.next=15;break}return l=e.t1,e.abrupt("return","break");case 15:return(r=u(n,a,s))>i&&(r=i),e.next=19,new Promise((function(e){return setTimeout(e,r)}));case 19:case"end":return e.stop()}}),e,null,[[0,8]])}));case 8:return e.delegateYield(f(),"t0",9);case 9:if("break"!==(d=e.t0)){e.next=12;break}return e.abrupt("break",15);case 12:if("object"!==o(d)){e.next=14;break}return e.abrupt("return",d.v);case 14:if(n++<c-1){e.next=8;break}case 15:return e.abrupt("return",Promise.reject(l));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));n(56),n(3),n(57),n(63),n(6),n(50),n(7),n(8),n(9),n(14),n(36);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function u(e,t,n){return(u=c()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,e);var t,n,r=(t=a,n=c(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)});function a(){return o(this,a),r.apply(this,arguments)}return a}(a(Error));function d(e){var t=Object.prototype.hasOwnProperty.call(e,"reply"),n=t&&Object.prototype.hasOwnProperty.call(e.reply,"status"),r=n&&Object.prototype.hasOwnProperty.call(e.reply.status,"code");return t&&n&&r}},function(e,t){e.exports=require("core-js/modules/es.array.reduce.js")},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.TokenExpired="tokenExpired",e.TokenAboutToExpire="tokenAboutToExpire",e.StateChanged="stateChanged",e.ConnectionError="connectionError",e.Connected="connected",e.Disconnected="disconnected",e.TokenUpdated="tokenUpdated"}(r||(r={}))},function(e,t){e.exports=require("core-js/modules/es.array.from.js")},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Guest="guest",e.Agent="agent",e.Admin="admin",e.Supervisor="supervisor"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(68),o=n.n(r),i={autoUpdateToken:!0};function a(){return o()(i)}},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return h}));n(3),n(10),n(15);var o=n(16),i=n(19),a=n(101),u=n(25),c=n(21),s=n(4),l=n(0),f=n(2);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,u,"next",e)}function u(e){p(i,r,o,a,u,"throw",e)}a(void 0)}))}}var b=function(){var e=v(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=n.createEventGroup(c.b.Default),e.next=4,o.addEvents({eventName:c.c.ClientInitialized,eventSource:c.d.Client,durationMs:r});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.error("Failed to send client init event",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}();function h(e,t,n){return y.apply(this,arguments)}function y(){return(y=v(regeneratorRuntime.mark((function t(n,p,v){var h,y,m,w,g,j,k,O,S,E,x,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=Date.now(),Object(u.c)(p,"token"),y=n.get(o.b),m=n.get(s.d),w=m(s.b.Client),g=n.get(l.i),j=n.get(l.g),Object(a.a)(y,v),k=n.get(i.c),t.prev=9,t.next=12,k.init(p);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(9),O={module:Object(f.b)(e),severity:l.b.Error,source:Object(f.a)(r)},51102===t.t0.code||20003===t.t0.code?(O.source="Twilsock",g(l.a.Forbidden,O,"Insufficient permissions",t.t0.source)):j(t.t0,O);case 18:return t.prev=18,S={dependencies:d({},c.a.Twilsock,"default")},E=n.get(c.e),t.next=23,E.setSessionData(S);case 23:return x=Date.now()-h,t.next=26,b(w,E,x);case 26:t.next=31;break;case 28:t.prev=28,t.t1=t.catch(18),w.error("Failed to set session data for telemetry",t.t1);case 31:return C=n.get(o.d),t.abrupt("return",C);case 33:case"end":return t.stop()}}),t,null,[[9,14],[18,28]])})))).apply(this,arguments)}}).call(this,"src/modules/client/ClientProvider","src/modules/client/ClientProvider/createClient.ts")},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n(6),n(3),n(7),n(13),n(8);var r,o,i,a,u,c,s,l,f=n(1),d=n(19),p=n(4),v=n(32),b=n(5);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,w(e,t,"get"))}function m(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,w(e,t,"set"),n),n}function w(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var g=Object(f.injectable)()((o=new WeakMap,i=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakMap,l=new WeakMap,r=function(){function e(t,n,r,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{writable:!0,value:void 0}),i.set(this,{writable:!0,value:void 0}),a.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:void 0}),c.set(this,{writable:!0,value:void 0}),s.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),m(this,o,t),m(this,i,n),m(this,a,r),m(this,u,f)}var t,n,r;return e=Object(f.inject)(b.a)(e,void 0,3)||e,e=Object(f.inject)(v.e)(e,void 0,2)||e,e=Object(f.inject)(p.e)(e,void 0,1)||e,e=Object(f.inject)(d.b)(e,void 0,0)||e,t=e,(n=[{key:"session",get:function(){return y(this,o)}},{key:"logger",get:function(){return y(this,i)}},{key:"telemetry",get:function(){return y(this,a)}},{key:"accountConfig",get:function(){return y(this,u)}},{key:"region",get:function(){return y(this,c)},set:function(e){m(this,c,e)}},{key:"appName",get:function(){return y(this,s)},set:function(e){m(this,s,e)}},{key:"appVersion",get:function(){return y(this,l)},set:function(e){m(this,l,e)}}])&&h(t.prototype,n),r&&h(t,r),e}()))||r},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(6),n(3),n(7),n(13),n(8);var r,o,i=n(1),a=n(0);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,l(e,t,"set"),n),n}function s(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,l(e,t,"get"))}function l(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var f=Object(i.injectable)()((o=new WeakMap,r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{writable:!0,value:void 0})}var t,n,r;return t=e,(n=[{key:"get",value:function(){if(!s(this,o))throw new a.d("Config data hasn't been fetched");return s(this,o)}},{key:"set",value:function(e){c(this,o,e)}}])&&u(t.prototype,n),r&&u(t,r),e}()))||r},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(3),n(10),n(15);var r=n(18);function o(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var i=function(e){return function(){var t,n=(t=regeneratorRuntime.mark((function t(n,o){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.get(r.b),t.next=3,i(n,o);case 3:return a=t.sent,t.abrupt("return",a.get());case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function u(e){o(a,r,i,u,c,"next",e)}function c(e){o(a,r,i,u,c,"throw",e)}u(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(3),n(10),n(15);var r=n(5);function o(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var i=function(e){return function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.get(r.f),t.next=3,o(n);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function u(e){o(a,r,i,u,c,"next",e)}function c(e){o(a,r,i,u,c,"throw",e)}u(void 0)}))});return function(e){return n.apply(this,arguments)}}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(53),n(54),n(31),n(72);var r=n(110),o=n.n(r),i=n(22),a=n(25),u=n(58);var c,s,l,f=(c={},s=u.b.Twilsock,l=o.a,s in c?Object.defineProperty(c,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[s]=l,c),d=function(e){return function(t){Object(a.e)(t,"name");var n=e.get(i.c),r=n.get(t);if(r)return r;var o,u=e.get(i.d).level,c=e.get(i.e),s=e.get(i.a);return o=Object.keys(f).includes(t)?function(e){return f[e].getLogger(e)}(t):c(t),o=s.reduce((function(e,t){return t(e)}),o),(r=new(e.get(i.f))(o)).setLevel(u),n.set(t,r),r}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(68),o=n.n(r),i={level:"ERROR"};function a(){return o()(i)}},function(e,t,n){"use strict";function r(){return{reportErrors:!0}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(26);var r=n(28);function o(e){var t=e.get(r.c);t.forEach((function(e){return e.cleanup()})),t.clear()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(40);var r=n(28);function o(e,t){var n=e.get(r.c),o=n.get(t.name);return o||((o=e.get(r.d)).setup(t),n.set(t.name,o)),o}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(113);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"with",value:function(e){e.bind("TelemetryService").to(r.a).inSingletonScope()}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(114);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"with",value:function(e){e.bind("ConfigurationService").to(r.a).inSingletonScope()}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(115);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"with",value:function(e){e.bind("FeaturesService").to(r.a).inSingletonScope()}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(116);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"with",value:function(e){e.bind("FederatedAuthService").to(r.a).inSingletonScope()}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(15),n(6),n(3),n(7),n(13),n(8),n(10);var r,o,i=n(1),a=n(11);function u(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,l(e,t,"set"),n),n}function l(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var f=Object(i.injectable)()((o=new WeakMap,r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{writable:!0,value:void 0}),s(this,o,t)}var t,n,r,f,d;return e=Object(i.inject)(a.b)(e,void 0,0)||e,t=e,(n=[{key:"post",value:(f=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(i=this,a=o,function(e,t){return t.get?t.get.call(e):t.value}(i,l(i,a,"get"))).post(t,{},n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}var i,a}),e,this)})),d=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=f.apply(e,t);function i(e){u(o,n,r,i,a,"next",e)}function a(e){u(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e,t){return d.apply(this,arguments)})}])&&c(t.prototype,n),r&&c(t,r),e}()))||r},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));n(15),n(6),n(3),n(7),n(13),n(8),n(10),n(125),n(55),n(64);var r,o,i,a,u,c,s,l=n(1),f=n(0),d=n(19),p=n(5),v=n(48),b=n(2),h=n(70),y=n(117),m=n(46);function w(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,u,"next",e)}function u(e){w(i,r,o,a,u,"throw",e)}a(void 0)}))}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,S(e,t,"get"))}function O(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,S(e,t,"set"),n),n}function S(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var E=Object(l.injectable)()((o=new WeakMap,i=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakMap,r=function(){function t(n,r,l,d){var p,h,y=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.set(this,{writable:!0,value:void 0}),i.set(this,{writable:!0,value:void 0}),a.set(this,{writable:!0,value:function(e){var t;return 429===e?t=f.a.TooManyRequests:e>=500&&(t=f.a.Unknown),t}}),u.set(this,{writable:!0,value:(p=g(regeneratorRuntime.mark((function t(n){var r,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={module:"backend",severity:f.b.Error,source:Object(b.a)(e)},(u=k(y,a).call(y,n.status))&&k(y,o).call(y,u,r),t.next=5,k(y,i).call(y,n,r);case 5:case"end":return t.stop()}}),t)}))),function(e){return p.apply(this,arguments)})}),c.set(this,{writable:!0,value:(h=g(regeneratorRuntime.mark((function e(t,n,r,i,a){var c,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=y.getEnvironmentSpecificUrl(t),e.prev=1,e.next=4,fetch(c,y.getRequestData(n,r,y.mapBody(i),a));case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),k(y,o).call(y,f.a.NetworkError,void 0,void 0,e.t0);case 10:if(s.ok){e.next=13;break}return e.next=13,k(y,u).call(y,s);case 13:return e.next=15,s.json();case 15:return l=e.sent,e.abrupt("return",Object(v.b)(l));case 17:case"end":return e.stop()}}),e,null,[[1,7]])}))),function(e,t,n,r,o){return h.apply(this,arguments)})}),s.set(this,{writable:!0,value:function(e){if(!e)return y.session.token;if("string"==typeof e)return e;throw new f.d("No token in request body")}}),this.session=n,this.envConfig=r,O(this,o,l),O(this,i,d)}var n,r,w,S;return t=Object(l.inject)(f.h)(t,void 0,3)||t,t=Object(l.inject)(f.i)(t,void 0,2)||t,t=Object(l.inject)(p.e)(t,void 0,1)||t,t=Object(l.inject)(d.c)(t,void 0,0)||t,n=t,(r=[{key:"get",value:function(e,t,n){return this.performNetworkCall(e,"GET",t,void 0,n)}},{key:"post",value:function(e,t,n,r){return this.performNetworkCall(e,"POST",t,n,r)}},{key:"put",value:function(e,t,n){return this.performNetworkCall(e,"PUT",t,n)}},{key:"delete",value:function(e,t){return this.performNetworkCall(e,"DELETE",t)}},{key:"getRequestData",value:function(e,t,n,r){return{headers:t?Object(m.b)(t,k(this,s).call(this,null==r?void 0:r.token)):new Headers({"Content-Type":"application/json"}),method:e,body:JSON.stringify(n)}}},{key:"getEnvironmentSpecificUrl",value:function(e){var t="",n=this.envConfig.region||"";return n.startsWith("dev-")?t=".dev":n.startsWith("stage-")&&(t=".stage"),e.replace("[environment]",t)}},{key:"mapBody",value:function(e){return e?Object(v.c)(e):e}},{key:"performNetworkCall",value:(S=g(regeneratorRuntime.mark((function e(t,n,r,o,i){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(h.a)({functionToRetry:function(){return k(a,c).call(a,t,n,r,o,i)},retryCondition:y.a}));case 1:case"end":return e.stop()}}),e)}))),function(e,t,n,r,o){return S.apply(this,arguments)})}])&&j(n.prototype,r),w&&j(n,w),t}()))||r}).call(this,"src/backend/HttpAdapter/HttpAdapterImpl.ts")},function(e,t){e.exports=require("lodash/camelCase")},function(e,t){e.exports=require("lodash/snakeCase")},function(e,t){e.exports=require("core-js/modules/es.object.values.js")},function(e,t){e.exports=require("core-js/modules/es.number.constructor.js")},function(e,t){e.exports=require("core-js/modules/es.string.trim.js")},function(e,t){e.exports=require("core-js/modules/es.string.match.js")},function(e,t){e.exports=require("core-js/modules/es.array.map.js")},function(e,t){e.exports=require("twilsock")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return s}));n(56);var o=n(102),i=n.n(o),a=n(0),u=n(2),c=n(25);function s(t,n){void 0!==n&&Object(c.d)(n,"userOptions");i()(t,n,(function(t,n,o,i,c){var s=Object.prototype.hasOwnProperty.call(i,o),l=Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(i),o);if(!s&&!l){var f={module:Object(u.b)(e),severity:a.b.Error,source:Object(u.a)(r)};throw new a.c(a.a.InvalidParams,f,"".concat(o," is not a valid property"))}}))}}).call(this,"src/utils","src/utils/mergeUserOptions.ts")},function(e,t){e.exports=require("lodash/mergeWith")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return h}));n(3),n(10),n(31),n(9),n(44),n(35),n(26),n(45),n(15);var o=n(5),i=n(4),a=n(0),u=n(33),c=n(16),s=n(17),l=n(2);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var b={module:Object(l.b)(e),eventSource:Object(l.a)(r)},h=function(e){return function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r,l,f,p,v,h,y,m,w,g,j,k,O,S,E,x=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=x.length>1&&void 0!==x[1]?x[1]:{},p=e.get(o.d),v=e.get(s.a),h=e.get(a.f),y=e.get(u.b),m=e.get(i.d)(i.b.Config),w=e.get(c.b),j=(null==w||null===(r=w.accountConfig.query)||void 0===r?void 0:r.UiVersion)||(null==f||null===(l=f.query)||void 0===l?void 0:l.UiVersion),t.prev=8,t.next=11,v.fetchConfiguration("UiVersion",j,{token:n});case 11:g=t.sent,y.setCachedItem(u.a.AccountConfig,g),t.next=26;break;case 15:if(t.prev=15,t.t0=t.catch(8),void 0!==(k=y.getCachedItem(u.a.AccountConfig))){t.next=22;break}return O="Failed to fetch account configuration: ".concat(t.t0,". No cache found."),S=t.t0.code||a.a.Unknown,t.abrupt("return",h(S,d(d({},b),{},{severity:a.b.Error}),O));case 22:k.dateCreated=new Date(k.dateCreated),k.dateUpdated=new Date(k.dateUpdated),m.warn("Failed to fetch account configuration: ".concat(t.t0,". Using cache instead")),g=k;case 26:return p.set(g),E=e.get(o.c),t.abrupt("return",E);case 29:case"end":return t.stop()}}),t,null,[[8,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){v(i,r,o,a,u,"next",e)}function u(e){v(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()}}).call(this,"src/modules/config/AccountConfigProvider","src/modules/config/AccountConfigProvider/AccountConfigProvider.ts")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return m}));n(15),n(97),n(122),n(55),n(64),n(98),n(3),n(10),n(31),n(9),n(44),n(35),n(26),n(45);var o=n(0),i=n(33),a=n(17),u=n(48),c=n(2),s=n(4);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,u,"next",e)}function u(e){p(i,r,o,a,u,"throw",e)}a(void 0)}))}}var b=/^([a-z]+-[a-z]+-\d+)$/,h={module:Object(c.b)(e),eventSource:Object(c.a)(r)};function y(e){return function(e){return!!e.accountSid}(e)?{paramName:"AccountSid",paramValue:e.accountSid}:{paramName:"RuntimeDomain",paramValue:function(e){var t=e.trim();if(t.endsWith("/")&&(t=t.replace(/\/$/,"")),!t.endsWith(".twil.io")){var n=t.match(b);n&&n[1]&&(t+=".twil.io")}return t}(e.runtimeDomain)}}function m(e,t){return w.apply(this,arguments)}function w(){return(w=v(regeneratorRuntime.mark((function e(t,n){var r,c,l,d,p,v,b,m,w,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get(a.a),c=t.get(o.i),l=t.get(o.f),d=t.get(i.b),p=t.get(s.d)(s.b.Config),v=y(n),e.prev=6,e.next=9,r.fetchPublicConfiguration(v.paramName,v.paramValue);case 9:b=e.sent,d.setCachedItem(i.a.PublicConfig,b),e.next=22;break;case 13:if(e.prev=13,e.t0=e.catch(6),void 0!==(m=d.getCachedItem(i.a.PublicConfig))){e.next=20;break}return w="Failed to fetch public configuration: ".concat(e.t0,". No cache found."),g=e.t0.code||o.a.Unknown,e.abrupt("return",l(g,f(f({},h),{},{severity:o.b.Error}),w));case 20:p.warn("Failed to fetch public configuration: ".concat(e.t0,". Using cache instead")),b=m;case 22:return b&&b.configurations&&b.configurations.length||c(o.a.SDK,f(f({},h),{},{severity:o.b.Error}),"Invalid response from public configuration endpoint"),e.abrupt("return",Object(u.b)(b.configurations[0]));case 24:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}}).call(this,"src/modules/config/PublicConfigProvider","src/modules/config/PublicConfigProvider/getPublicConfig.ts")},function(e,t){e.exports=require("lodash/mapKeys")},function(e,t){e.exports=require("lodash/transform")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return v}));n(3),n(10),n(31),n(9),n(44),n(35),n(26),n(45),n(15);var o=n(4),i=n(0),a=n(33),u=n(17),c=n(2);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var p={module:Object(c.b)(e),eventSource:Object(c.a)(r)},v=function(e){var t=e.container;return function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var r,c,s,f,d,v,b,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get(u.b),c=t.get(i.f),s=t.get(a.b),f=t.get(o.d)(o.b.Config),e.prev=4,e.next=7,r.fetchFeatures({token:n});case 7:d=e.sent,s.setCachedItem(a.a.FeaturesConfig,d),e.next=20;break;case 11:if(e.prev=11,e.t0=e.catch(4),void 0!==(v=s.getCachedItem(a.a.FeaturesConfig))){e.next=18;break}return b="Failed to fetch features: ".concat(e.t0,". No cache found."),h=e.t0.code||i.a.Unknown,e.abrupt("return",c(h,l(l({},p),{},{severity:i.b.Error}),b));case 18:f.warn("Failed to fetch features: ".concat(e.t0,". Using cache instead")),d=v;case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,u,"next",e)}function u(e){d(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()}}).call(this,"src/modules/config/FeaturesProvider/featuresProviderImpl","src/modules/config/FeaturesProvider/featuresProviderImpl/featuresProviderImpl.ts")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return B}));n(15),n(6),n(3),n(7),n(13),n(8),n(27),n(10);var o,i,a,u,c,s,l,f,d,p,v,b,h,y,m,w,g,j,k,O=n(1),S=n(61),E=n.n(S),x=n(67),C=n(24),T=n(39),P=n(29),R=n(11),M=n(0),A=n(4),D=n(5),W=n(16),I=n(70),F=n(2),_=n(71);function L(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){L(i,r,o,a,u,"next",e)}function u(e){L(i,r,o,a,u,"throw",e)}a(void 0)}))}}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,z(e,t,"get"))}function V(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,z(e,t,"set"),n),n}function z(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var B=Object(O.injectable)()((i=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakMap,l=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,v=new WeakMap,b=new WeakMap,h=new WeakMap,y=new WeakMap,m=new WeakMap,w=new WeakMap,g=new WeakMap,j=new WeakMap,k=new WeakMap,o=function(){function t(n,o,O,S,x,C,P,D){var W,I=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i.set(this,{writable:!0,value:void 0}),a.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:void 0}),c.set(this,{writable:!0,value:void 0}),s.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:function(e,t){I.getRawTwilsockClient().on(e,(function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=N(I,l)).emit.apply(e,[t].concat(r))}))}}),v.set(this,{writable:!0,value:function(){N(I,p).call(I,T.a.TokenExpired,R.a.TokenExpired),N(I,p).call(I,T.a.TokenAboutToExpire,R.a.TokenAboutToExpire),N(I,p).call(I,T.a.StateChanged,R.a.StateChanged),N(I,p).call(I,T.a.Connected,R.a.Connected),N(I,p).call(I,T.a.Disconnected,R.a.Disconnected),N(I,h).call(I)}}),b.set(this,{writable:!0,value:function(){var e=E.a.getLogger("twilsock");e.methodFactory=function(e){return function(){var t;return(t=N(I,u))[e].apply(t,arguments)}},e.setLevel("trace")}}),h.set(this,{writable:!0,value:function(){I.getRawTwilsockClient().on(T.a.ConnectionError,(function(e){var t=e.errorCode,n=e.metadata,r=e.message,o=new M.c(t||M.a.TwilsockConnectionError,n,r);N(I,l).emit(R.a.ConnectionError,o)}))}}),y.set(this,{writable:!0,value:function(e){return e instanceof M.c&&e.code===M.a.TwilsockConnectionError}}),m.set(this,{writable:!0,value:function(e){return Object(_.b)(e)&&429===e.reply.status.code}}),w.set(this,{writable:!0,value:function(e){return Object(_.b)(e)&&e.reply.status.code>=500}}),g.set(this,{writable:!0,value:function(e){return N(I,m).call(I,e)||N(I,w).call(I,e)||N(I,y).call(I,e)}}),j.set(this,{writable:!0,value:(W=q(regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I.twilsockClient){t.next=5;break}o={module:Object(F.b)(e),severity:M.b.Error,source:Object(F.a)(r)},N(I,f).call(I,M.a.InvalidState,o,"no twilsock client"),t.next=8;break;case 5:return t.next=7,I.twilsockClient.updateToken(n);case 7:N(I,l).emit(R.a.TokenUpdated,n);case 8:case"end":return t.stop()}}),t)}))),function(e){return W.apply(this,arguments)})}),k.set(this,{writable:!0,value:function(){return new Promise((function(e,t){if(I.getRawTwilsockClient().isConnected)e();else{var n=function(){return e()},r=function(e){return t(e)},o=function(){I.removeListener(R.a.Connected,n),I.removeListener(R.a.ConnectionError,r)};I.addListener(R.a.Connected,(function(){o(),n()})),I.addListener(R.a.ConnectionError,(function(e){o(),r(e)}))}}))}}),V(this,a,n),V(this,i,o),V(this,u,O(A.b.Twilsock)),N(this,u).debug("Twilsock constructed"),V(this,c,S),V(this,s,x),V(this,l,C),V(this,f,P),V(this,d,D)}var n,o,S,L,z,B,K;return t=Object(O.inject)(M.g)(t,void 0,7)||t,t=Object(O.inject)(M.i)(t,void 0,6)||t,t=Object(O.inject)(C.b)(t,void 0,5)||t,t=Object(O.inject)(W.b)(t,void 0,4)||t,t=Object(O.inject)(D.e)(t,void 0,3)||t,t=Object(O.inject)(A.d)(t,void 0,2)||t,t=Object(O.inject)(P.b)(t,void 0,1)||t,t=Object(O.inject)(P.c)(t,void 0,0)||t,n=t,(o=[{key:"connect",value:(K=q(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.twilsockClient){e.next=2;break}throw new M.d("Twilsock connection already exists");case 2:return n={region:N(this,s).region||N(this,c).region,clientMetadata:{type:"flex-sdk",sdk:"JS",sdkv:x.a,app:N(this,s).appName,appv:N(this,s).appVersion}},this.twilsockClient=N(this,a).call(this,t,N(this,i),n),N(this,v).call(this),N(this,b).call(this),this.twilsockClient.connect(),e.next=9,N(this,k).call(this);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return K.apply(this,arguments)})},{key:"updateToken",value:(B=q(regeneratorRuntime.mark((function t(n){var r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(I.a)({functionToRetry:function(){return N(o,j).call(o,n)},retryCondition:N(this,g),logger:N(this,u)});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),r={module:Object(F.b)(e),severity:M.b.Error,source:"update Twilsock token"},N(this,d).call(this,t.t0,r);case 9:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(e){return B.apply(this,arguments)})},{key:"getRawTwilsockClient",value:function(){if(!this.twilsockClient)throw new M.d("Twilsock hasn't been initialized");return this.twilsockClient}},{key:"post",value:(z=q(regeneratorRuntime.mark((function t(n,o,i){var a,u,c,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getRawTwilsockClient().post(n,o,i);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),c=(null===(a=t.t0.body)||void 0===a?void 0:a.code)||M.a.SDK,s=(null===(u=t.t0.body)||void 0===u?void 0:u.message)||t.t0.message,l={module:Object(F.b)(e),severity:M.b.Error,source:Object(F.a)(r)},t.abrupt("return",N(this,f).call(this,c,l,s,t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(e,t,n){return z.apply(this,arguments)})},{key:"destroy",value:(L=q(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.twilsockClient){e.next=2;break}return e.abrupt("return");case 2:return t=this.twilsockClient,n=new Promise((function(e){t.on(T.a.Disconnected,e)})),e.next=6,t.disconnect();case 6:return e.next=8,n;case 8:delete this.twilsockClient,N(this,l).removeAllListeners();case 10:case"end":return e.stop()}}),e,this)}))),function(){return L.apply(this,arguments)})},{key:"addListener",value:function(e,t){return N(this,l).on(e,t),this}},{key:"removeListener",value:function(e,t){return N(this,l).removeListener(e,t),this}},{key:"isConnected",value:function(){return!!this.twilsockClient&&this.getRawTwilsockClient().isConnected}}])&&U(n.prototype,o),S&&U(n,S),t}()))||o}).call(this,"src/modules/websocket/Twilsock","src/modules/websocket/Twilsock/TwilsockImpl.ts")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return u}));n(53),n(54),n(3),n(57),n(27);var o=n(19),i=n(0),a=n(2),u=function(t){return function(n){return function(u,c,s){var l=s.value,f=t.get(o.c);s.value=function(){var o=f.roles;if(!o.includes(n)){var u=o.length?o.toString():"no role",c={module:Object(a.b)(e),severity:i.b.Error,source:Object(a.a)(r)},s=t.get(i.f);s(i.a.Forbidden,c,"Expected the role ".concat(n,", but got ").concat(u," instead."))}for(var d=arguments.length,p=new Array(d),v=0;v<d;v++)p[v]=arguments[v];var b=l.apply(this,p);return b}}}}}).call(this,"src/modules/rbac/RequiredRole","src/modules/rbac/RequiredRole/requiredRole.ts")},function(e,t,n){var r,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(55),n(62),n(40),n(9),n(14),n(3),n(36),n(6),n(7),n(8),function(a,u){"use strict";void 0===(o="function"==typeof(r=function(){var e=function(){},t="undefined"!==("undefined"==typeof window?"undefined":i(window))&&"undefined"!==i(window.navigator)&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function r(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),"undefined"!==("undefined"==typeof console?"undefined":i(console))&&("trace"===n&&t?o:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):e)}function u(t,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<t?e:this.methodFactory(i,t,r)}this.log=this.debug}function c(e,t,n){return function(){"undefined"!==("undefined"==typeof console?"undefined":i(console))&&(u.call(this,t,n),this[e].apply(this,arguments))}}function s(e,t,n){return a(e)||c.apply(this,arguments)}function l(e,t,r){var o,a=this,c="loglevel";function l(){var e;if("undefined"!==("undefined"==typeof window?"undefined":i(window))&&c){try{e=window.localStorage[c]}catch(e){}if("undefined"===i(e))try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"===i(e)&&(c=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=r||s,a.getLevel=function(){return o},a.setLevel=function(t,r){if("string"==typeof t&&void 0!==a.levels[t.toUpperCase()]&&(t=a.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(o=t,!1!==r&&function(e){var t=(n[e]||"silent").toUpperCase();if("undefined"!==("undefined"==typeof window?"undefined":i(window))&&c){try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}}(t),u.call(a,t,e),"undefined"===("undefined"==typeof console?"undefined":i(console))&&t<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){l()||a.setLevel(e,!1)},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var f=l();null==f&&(f=null==t?"WARN":t),a.setLevel(f,!1)}var f=new l,d={};f.getLogger=function(e){if("symbol"!==i(e)&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,f.getLevel(),f.methodFactory)),t};var p="undefined"!==("undefined"==typeof window?"undefined":i(window))?window.log:void 0;return f.noConflict=function(){return"undefined"!==("undefined"==typeof window?"undefined":i(window))&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return d},f.default=f,f})?r.call(t,n,t,e):r)||(e.exports=o)}()},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return W}));n(31),n(9),n(44),n(35),n(45),n(14),n(36),n(74),n(40),n(15),n(6),n(3),n(7),n(13),n(8),n(53),n(54),n(26),n(27),n(62),n(10),n(72);var o,i,a,u,c,s,l,f,d,p,v=n(1),b=n(4),h=n(112),y=n(17),m=n(0),w=n(25),g=n(2),j=n(69),k=n(12);function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){T(i,r,o,a,u,"next",e)}function u(e){T(i,r,o,a,u,"throw",e)}a(void 0)}))}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,D(e,t,"get"))}function A(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var W=Object(v.injectable)()((i=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,s=new WeakMap,l=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,o=function(){function t(n,o,v,h,y,w){var j,k=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i.set(this,{writable:!0,value:void 0}),a.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:!1}),c.set(this,{writable:!0,value:void 0}),s.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:(j=P(regeneratorRuntime.mark((function t(n){var o,s,l,f,d,v,b,h,y=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=y.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=y[l];return M(k,i).debug("Sending",s.length,"telemetry events"),M(k,i).trace("Events",s),f={number_of_successful_events:0,number_of_failed_events:0},t.prev=4,M(k,p).call(k,n).check(),t.next=9,M(k,a).postTelemetryEvents({events:s});case 9:d=t.sent,(v=d.body)&&(f=v,M(k,i).debug("Telemetry sent successfully")),t.next=22;break;case 14:if(t.prev=14,t.t0=t.catch(4),!(t.t0 instanceof m.c&&[m.a.TooManySDKRequests,m.a.TemporarilyDisabled].includes(t.t0.code))){t.next=18;break}return t.abrupt("return",f);case 18:409!==(null===(b=t.t0.wrappedError)||void 0===b?void 0:b.status)&&(h={module:Object(g.b)(e),severity:m.b.Error,eventSource:Object(g.a)(r)},M(k,c).call(k,t.t0,h)),M(k,i).warn("Telemetry is disabled for this account"),A(k,u,!0);case 22:return t.abrupt("return",f);case 23:case"end":return t.stop()}}),t,null,[[4,14]])}))),function(e){return j.apply(this,arguments)})}),p.set(this,{writable:!0,value:function(e){return M(k,l).call(k,x(x({},M(k,f)),{},{name:e}))}}),A(this,i,n(b.c.TelemetryProcessor)),A(this,a,o),A(this,s,v),A(this,c,h),A(this,l,y),A(this,f,w)}var n,o,S,E;return t=Object(v.inject)(k.g)(t,void 0,5)||t,t=Object(v.inject)(j.b)(t,void 0,4)||t,t=Object(v.inject)(m.g)(t,void 0,3)||t,t=Object(v.inject)(m.f)(t,void 0,2)||t,t=Object(v.inject)(y.e)(t,void 0,1)||t,t=Object(v.inject)(b.d)(t,void 0,0)||t,n=t,(o=[{key:"processEvents",value:(E=P(regeneratorRuntime.mark((function e(t,n,r){var o,a,c,l,f,p,v,b,y,m,g,j,k=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(Object(w.c)(t,"payload type"),void 0!==n&&Object(w.c)(n,"group name"),o=k.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=k[c];if(a.forEach((function(e){var t=e.eventName,n=e.eventSource;Object(w.c)(t,"event name"),void 0!==n&&Object(w.c)(n,"event source")})),!M(this,u)){e.next=7;break}return M(this,i).trace("Events not sent: telemetry disabled"),e.abrupt("return",{eventsNotProcessed:a.length,eventsSucceeded:0,eventsFailed:0});case 7:if(M(this,i).debug("common attributes:",r),l=h.a.apply(void 0,[M(this,s),t,n,r].concat(a)),f=0,p=0,!l.length){e.next=19;break}for(b=[],y=0;y<l.length;y+=50)v=l.slice(y,y+50),b.push((m=M(this,d)).call.apply(m,[this,t].concat(O(v))));return e.next=16,Promise.all(b);case 16:g=e.sent,f=g.reduce((function(e,t){return e+t.number_of_successful_events}),0),p=g.reduce((function(e,t){return e+t.number_of_failed_events}),0);case 19:return j=a.length-f-p,e.abrupt("return",{eventsSucceeded:f,eventsFailed:p,eventsNotProcessed:j});case 21:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return E.apply(this,arguments)})}])&&R(n.prototype,o),S&&R(n,S),t}()))||o}).call(this,"src/modules/telemetry/TelemetryProcessor/TwilioEventProcessor","src/modules/telemetry/TelemetryProcessor/TwilioEventProcessor/TwilioTelemetryProcessor.ts")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return f}));n(99),n(31),n(9),n(44),n(35),n(26),n(45);var o=n(48),i=n(0),a=n(2);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(t,n,u,s,l){var f,d=void 0===l?{}:Object(o.a)(l),p=c(c({},Object(o.a)(u)),{},{client_timestamp:(new Date).toISOString(),event_group:s});if(f=p,Object.prototype.hasOwnProperty.call(f,"event_name")&&Object.prototype.hasOwnProperty.call(f,"client_timestamp"))return{payload_type:n,payload:c(c({},p),d)};var v={module:Object(a.b)(e),severity:i.b.Error,source:Object(a.a)(r)};return t(i.a.InvalidParams,v,"Telemetry event has missing fields")}function f(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];return i.map((function(o){return l(e,t,o,n,r)}))}}).call(this,"src/modules/telemetry/TelemetryProcessor/TwilioEventProcessor","src/modules/telemetry/TelemetryProcessor/TwilioEventProcessor/toSdkBackendEvent.ts")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));n(15),n(6),n(3),n(7),n(13),n(8),n(10);var r,o,i=n(1),a=n(0),u=n(17),c=n(2);function s(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,d(e,t,"set"),n),n}function d(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var p=Object(i.injectable)()((o=new WeakMap,r=function(){function t(e,n){var r,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a="http://flex-sdk.twilio.com/v1",(i="basePath")in(r=this)?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,o.set(this,{writable:!0,value:void 0}),this.twilsockAdapter=e,f(this,o,n)}var n,r,p,v,b;return t=Object(i.inject)(a.i)(t,void 0,1)||t,t=Object(i.inject)(u.f)(t,void 0,0)||t,n=t,(r=[{key:"postTelemetryEvents",value:(v=regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==n&&(r={module:"backend",severity:a.b.Error,source:Object(c.a)(e)},(u=this,s=o,function(e,t){return t.get?t.get.call(e):t.value}(u,d(u,s,"get"))).call(this,a.a.InvalidParams,r,"Required parameter events was null or undefined when calling postTelemetryEvents.")),t.next=3,this.twilsockAdapter.post("".concat(this.basePath,"/Telemetry/Events"),n);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}var u,s}),t,this)})),b=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=v.apply(e,t);function i(e){s(o,n,r,i,a,"next",e)}function a(e){s(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e){return b.apply(this,arguments)})}])&&l(n.prototype,r),p&&l(n,p),t}()))||r}).call(this,"src/backend/generated/Telemetry/api/telemetry.service.ts")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));n(15),n(6),n(3),n(7),n(13),n(8),n(27),n(10);var r,o,i=n(1),a=n(0),u=n(17),c=n(46),s=n(41),l=n(2);function f(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,u,"next",e)}function u(e){f(i,r,o,a,u,"throw",e)}a(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,h(e,t,"get"))}function b(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,h(e,t,"set"),n),n}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var y=Object(i.injectable)()((o=new WeakMap,r=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.set(this,{writable:!0,value:void 0}),this.httpAdapter=e,b(this,o,n)}var n,r,f,h,y,m;return t=Object(i.inject)(a.i)(t,void 0,1)||t,t=Object(i.inject)(u.d)(t,void 0,0)||t,n=t,(r=[{key:"fetchConfiguration",value:(m=d(regeneratorRuntime.mark((function t(n,r,i){var u,f,d,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},t.prev=1,t.next=4,this.httpAdapter.get("https://flex-api[environment].twilio.com/v1/Configuration?".concat(encodeURIComponent(String(n)),"=").concat(encodeURIComponent(String(r))),c.a.Basic,i);case 4:f=t.sent,t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(1),!Object(a.e)(t.t0.code)){t.next=12;break}return d="ConfigurationService - ".concat(t.t0.message),t.abrupt("return",v(this,o).call(this,a.a.DownstreamServiceError,u,d));case 12:return t.abrupt("return",Promise.reject(t.t0));case 13:return p=Object(s.a)(f),t.abrupt("return",p);case 15:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(e,t,n){return m.apply(this,arguments)})},{key:"fetchPublicConfiguration",value:(y=d(regeneratorRuntime.mark((function t(n,r){var i,u,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},null==n&&v(this,o).call(this,a.a.InvalidParams,i,"Required parameter queryParamName was null or undefined."),null==r&&v(this,o).call(this,a.a.InvalidParams,i,"Required parameter queryParamValue was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.get("https://flex-api[environment].twilio.com/v1/Configuration/Public?".concat(encodeURIComponent(String(n)),"=").concat(encodeURIComponent(String(r))),void 0);case 6:u=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!Object(a.e)(t.t0.code)){t.next=14;break}return c="ConfigurationService - ".concat(t.t0.message),t.abrupt("return",v(this,o).call(this,a.a.DownstreamServiceError,i,c));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return f=Object(s.a)(u),t.abrupt("return",f);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(e,t){return y.apply(this,arguments)})},{key:"updateConfiguration",value:(h=d(regeneratorRuntime.mark((function t(n){var r,i,u,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},null==n&&v(this,o).call(this,a.a.InvalidParams,r,"Required parameter accountConfigData was null or undefined."),t.prev=2,t.next=5,this.httpAdapter.post("https://flex-api[environment].twilio.com/v1/Configuration",c.a.Basic,n);case 5:i=t.sent,t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(2),!Object(a.e)(t.t0.code)){t.next=13;break}return u="ConfigurationService - ".concat(t.t0.message),t.abrupt("return",v(this,o).call(this,a.a.DownstreamServiceError,r,u));case 13:return t.abrupt("return",Promise.reject(t.t0));case 14:return f=Object(s.a)(i),t.abrupt("return",f);case 16:case"end":return t.stop()}}),t,this,[[2,8]])}))),function(e){return h.apply(this,arguments)})}])&&p(n.prototype,r),f&&p(n,f),t}()))||r}).call(this,"src/backend/generated/Configuration/api/configuration.service.ts")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));n(15),n(6),n(3),n(7),n(13),n(8),n(10);var r,o,i=n(1),a=n(0),u=n(17),c=n(46),s=n(41),l=n(2);function f(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,v(e,t,"set"),n),n}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var b=Object(i.injectable)()((o=new WeakMap,r=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.set(this,{writable:!0,value:void 0}),this.httpAdapter=e,p(this,o,n)}var n,r,b,h,y;return t=Object(i.inject)(a.i)(t,void 0,1)||t,t=Object(i.inject)(u.d)(t,void 0,0)||t,n=t,(r=[{key:"fetchFeatures",value:(h=regeneratorRuntime.mark((function t(n){var r,i,u,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},t.prev=1,t.next=4,this.httpAdapter.get("https://flex[environment].twilio.com/api/v1/Session",c.a.HostedFlex,n);case 4:i=t.sent,t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(1),!Object(a.e)(t.t0.code)){t.next=12;break}return u="FeaturesService - ".concat(t.t0.message),t.abrupt("return",(d=this,p=o,function(e,t){return t.get?t.get.call(e):t.value}(d,v(d,p,"get"))).call(this,a.a.DownstreamServiceError,r,u));case 12:return t.abrupt("return",Promise.reject(t.t0));case 13:return f=Object(s.a)(i),t.abrupt("return",f);case 15:case"end":return t.stop()}var d,p}),t,this,[[1,7]])})),y=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=h.apply(e,t);function i(e){f(o,n,r,i,a,"next",e)}function a(e){f(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e){return y.apply(this,arguments)})}])&&d(n.prototype,r),b&&d(n,b),t}()))||r}).call(this,"src/backend/generated/Features/api/features.service.ts")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));n(15),n(6),n(3),n(7),n(13),n(8),n(10);var r,o,i=n(1),a=n(0),u=n(17),c=n(46),s=n(41),l=n(2);function f(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,u,"next",e)}function u(e){f(i,r,o,a,u,"throw",e)}a(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,h(e,t,"get"))}function b(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,h(e,t,"set"),n),n}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var y=Object(i.injectable)()((o=new WeakMap,r=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.set(this,{writable:!0,value:void 0}),this.httpAdapter=e,b(this,o,n)}var n,r,f,h,y,m;return t=Object(i.inject)(a.i)(t,void 0,1)||t,t=Object(i.inject)(u.d)(t,void 0,0)||t,n=t,(r=[{key:"getIdpUrl",value:(m=d(regeneratorRuntime.mark((function t(n,r){var i,u,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},null==n&&v(this,o).call(this,a.a.InvalidParams,i,"Required parameter accountSid was null or undefined."),null==r&&v(this,o).call(this,a.a.InvalidParams,i,"Required parameter sSOLoginRequestBody was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.post("https://iam[environment].twilio.com/v1/Accounts/".concat(encodeURIComponent(String(n)),"/authenticate"),void 0,r);case 6:u=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!Object(a.e)(t.t0.code)){t.next=14;break}return c="FederatedAuthService - ".concat(t.t0.message),t.abrupt("return",v(this,o).call(this,a.a.DownstreamServiceError,i,c));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return f=Object(s.a)(u),t.abrupt("return",f);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(e,t){return m.apply(this,arguments)})},{key:"refreshToken",value:(y=d(regeneratorRuntime.mark((function t(n,r){var i,u,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},null==n&&v(this,o).call(this,a.a.InvalidParams,i,"Required parameter accountSid was null or undefined."),null==r&&v(this,o).call(this,a.a.InvalidParams,i,"Required parameter token was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.post("https://iam[environment].twilio.com/v1/Accounts/".concat(encodeURIComponent(String(n)),"/Tokens/refresh"),void 0,r);case 6:u=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!Object(a.e)(t.t0.code)){t.next=14;break}return c="FederatedAuthService - ".concat(t.t0.message),t.abrupt("return",v(this,o).call(this,a.a.DownstreamServiceError,i,c));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return f=Object(s.a)(u),t.abrupt("return",f);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(e,t){return y.apply(this,arguments)})},{key:"validateToken",value:(h=d(regeneratorRuntime.mark((function t(n,r,i){var u,f,d,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={module:"backend",severity:a.b.Error,source:Object(l.a)(e)},null==n&&v(this,o).call(this,a.a.InvalidParams,u,"Required parameter accountSid was null or undefined."),null==r&&v(this,o).call(this,a.a.InvalidParams,u,"Required parameter token was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.post("https://iam[environment].twilio.com/v1/Accounts/".concat(encodeURIComponent(String(n)),"/Tokens/validate"),c.a.Basic,r,i);case 6:f=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!Object(a.e)(t.t0.code)){t.next=14;break}return d="FederatedAuthService - ".concat(t.t0.message),t.abrupt("return",v(this,o).call(this,a.a.DownstreamServiceError,u,d));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return p=Object(s.a)(f),t.abrupt("return",p);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(e,t,n){return h.apply(this,arguments)})}])&&p(n.prototype,r),f&&p(n,f),t}()))||r}).call(this,"src/backend/generated/FederatedAuth/api/federatedAuth.service.ts")},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(53),n(54);var r=n(0),o=function(e){return[r.a.Unknown,r.a.TooManyRequests,r.a.NetworkError].includes(e.code)}},function(e,t){e.exports=require("reflect-metadata")},function(e,t,n){"use strict";n.r(t),n.d(t,"LoggerName",(function(){return c.b})),n.d(t,"ClientEvent",(function(){return a.a})),n.d(t,"auth",(function(){return d})),n.d(t,"getLogger",(function(){return p})),n.d(t,"getTwilioIdpUrl",(function(){return v})),n.d(t,"getPublicConfig",(function(){return b})),n.d(t,"getAccountConfig",(function(){return h})),n.d(t,"getFeaturesConfig",(function(){return y})),n.d(t,"createClient",(function(){return m})),n.d(t,"clearCache",(function(){return w})),n.d(t,"version",(function(){return g})),n.d(t,"FlexSdkError",(function(){return f.c})),n.d(t,"ErrorCode",(function(){return f.a})),n.d(t,"ErrorSeverity",(function(){return f.b}));var r=n(67),o=n(42),i=n(5),a=n(16),u=n(34),c=n(4);function s(e){return function(t){return function(){var n=e(),r=n.get(t);return r.apply(void 0,arguments)}}}var l=n(43),f=n(0),d=s(o.a)(u.b),p=s(o.b)(c.d),v=s(o.a)(u.d),b=s(o.a)(i.i),h=s(o.a)(i.g),y=s(o.a)(i.h),m=s(o.a)(a.c),w=s(o.a)(l.a),g=r.a},function(e,t){e.exports=require("core-js/modules/es.array.find.js")},function(e,t){e.exports=require("core-js/modules/es.number.is-nan.js")},function(e,t){e.exports=require("core-js/modules/es.string.ends-with.js")},function(e,t){e.exports=require("core-js/modules/es.regexp.constructor.js")},function(e,t){e.exports=require("core-js/modules/es.object.entries.js")},function(e,t){e.exports=require("core-js/modules/es.string.starts-with.js")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return w}));n(6),n(3),n(7),n(13),n(8),n(10),n(27);var o,i,a,u,c=n(1),s=n(73),l=n(29),f=n(24),d=n(0),p=n(2);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,m(e,t,"get"))}function y(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,m(e,t,"set"),n),n}function m(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var w=Object(c.injectable)()((i=new WeakMap,a=new WeakMap,u=new WeakMap,o=function(){function t(e,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i.set(this,{writable:!0,value:void 0}),a.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:void 0}),b(this,"connect",jest.fn((function(){return Promise.resolve()}))),b(this,"destroy",jest.fn((function(){return r.$emit(s.a.Disconnected),h(r,u).removeAllListeners(),Promise.resolve()}))),b(this,"updateToken",jest.fn((function(){return r.$emit(s.a.TokenUpdated),Promise.resolve()}))),b(this,"getRawTwilsockClient",jest.fn((function(){return h(r,a)||y(r,a,h(r,i).call(r,"token","productID")),h(r,a)}))),b(this,"isConnected",jest.fn((function(){return!!h(r,a)&&h(r,a).isConnected}))),b(this,"post",jest.fn((function(e,t,n){return Promise.resolve({status:{code:204,status:"No content"},headers:{}})}))),y(this,i,e),y(this,u,n)}var n,o,m;return t=Object(c.inject)(f.b)(t,void 0,1)||t,t=Object(c.inject)(l.c)(t,void 0,0)||t,n=t,(o=[{key:"$emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=h(this,u)).emit.apply(t,[e].concat(r))}},{key:"$setupErrorState",value:function(){var t={module:Object(p.b)(e),severity:d.b.Error,source:Object(p.a)(r)};this.connect.mockRejectedValue(new d.c(d.a.SDK,t)),this.post.mockRejectedValue(new d.c(d.a.SDK,t)),this.updateToken.mockRejectedValue(new d.c(d.a.SDK,t))}},{key:"addListener",value:function(e,t){return h(this,u).on(e,t),this}},{key:"removeListener",value:function(e,t){return h(this,u).removeListener(e,t),this}}])&&v(n.prototype,o),m&&v(n,m),t}()))||o}).call(this,"src/modules/websocket/Twilsock","src/modules/websocket/Twilsock/Twilsock.mock.ts")},function(e,t){e.exports=require("core-js/modules/es.object.assign.js")},function(e,t){e.exports=require("core-js/modules/es.reflect.get.js")},function(e,t,n){"use strict";n.r(t),n.d(t,"getMock",(function(){return Sn})),n.d(t,"LoggerName",(function(){return jn.LoggerName})),n.d(t,"ClientEvent",(function(){return jn.ClientEvent})),n.d(t,"version",(function(){return jn.version})),n.d(t,"FlexSdkError",(function(){return jn.FlexSdkError})),n.d(t,"ErrorCode",(function(){return jn.ErrorCode})),n.d(t,"ErrorSeverity",(function(){return jn.ErrorSeverity})),n.d(t,"auth",(function(){return En})),n.d(t,"getLogger",(function(){return xn})),n.d(t,"getTwilioIdpUrl",(function(){return Cn})),n.d(t,"getPublicConfig",(function(){return Tn})),n.d(t,"createClient",(function(){return Pn})),n.d(t,"clearCache",(function(){return Rn})),n.d(t,"getAccountConfig",(function(){return Mn})),n.d(t,"getFeaturesConfig",(function(){return An}));var r,o,i=n(5),a=(n(31),n(9),n(44),n(35),n(26),n(45),n(6),n(3),n(7),n(13),n(8),n(10),n(1)),u={crmType:null,callRecordingEnabled:!0,integrations:null,crmCallbackUrl:null,serverlessServiceSids:null,pluginServiceEnabled:null,crmAttributes:null,uiVersion:"~1.13.0",crmFallbackUrl:null,serviceVersion:null,taskrouterTargetWorkflowSid:"WWTargetMock",messagingServiceInstanceSid:null,pluginServiceAttributes:null,dateUpdated:new Date("2019-12-10T11:23:42Z"),callRecordingWebhookUrl:null,publicAttributes:{loginPopup:!1},crmEnabled:null,status:"ok",taskrouterWorkerAttributes:null,chatServiceInstanceSid:"ISChat",taskrouterWorkerChannels:null,taskrouterOfflineActivitySid:"WAOfflineMock",taskrouterWorkspaceSid:"WSMock",dateCreated:new Date("2019-11-21T11:21:21Z"),taskrouterSkills:[],taskrouterTaskqueues:null,uiAttributes:{version_compatibility:"yes",version_message:""},url:"https://localhost/Configuration",outboundCallFlows:null,taskrouterTargetTaskqueueSid:"WQTargetMock",accountSid:"ACMock",runtimeDomain:"runtimedomain-mock-1234.twil.io",uiLanguage:null,attributes:{},uiDependencies:{react:"version1"},flexServiceInstanceSid:"IS00000000000000000000000000000000",channelConfigs:[{address_type:"sms",cbm_attachments:{enabled:!0,number_of_attachments:1,max_file_size:100,max_total_file_size:100,accepted_extensions:["jpg","jpeg","png","gif","txt","pdf"]}}],queueStatsConfiguration:{default:{service_level_threshold:20,short_abandoned_threshold:5,reset_timezone:"America/New_York",reset_time:"00:00"},queue_configurations:[{queue_sid:"WQ00000000000000000000000000000000",reset_timezone:"Europe/Tallinn",reset_time:"01:00"},{queue_sid:"WQ00000000000000000000000000000001",reset_timezone:"Europe/Paris",reset_time:"02:00"}],queue_channel_configurations:[{queue_sid:"WQ00000000000000000000000000000000",channel_sid:"TC00000000000000000000000000000000",service_level_threshold:10,short_abandoned_threshold:10},{queue_sid:"WQ00000000000000000000000000000001",channel_sid:"TC00000000000000000000000000000001",service_level_threshold:30,short_abandoned_threshold:15}]}};function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,v(e,t,"set"),n),n}function p(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,v(e,t,"get"))}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var b,h,y,m,w,g,j,k=Object(a.injectable)()((o=new WeakMap,r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{writable:!0,value:u})}var t,n,r;return t=e,(n=[{key:"get",value:function(){return p(this,o)}},{key:"set",value:function(e){return d(this,o,s(s({},p(this,o)),e)),Promise.resolve()}},{key:"$set",value:function(e,t){this.$setAccountConfigData(l({},e,t))}},{key:"$setAccountConfigData",value:function(e){d(this,o,s(s({},p(this,o)),e))}}])&&f(t.prototype,n),r&&f(t,r),e}()))||r,O=n(18),S=n(16),E=n(51),x=n(34),C=(n(72),n(62),n(75)),T=n(23);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,D(e,t,"get"))}function A(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var W,I,F,_,L,q,U=(b=Object(a.injectable)(),h=Object(a.postConstruct)(),b((w=new WeakMap,g=new WeakMap,j=new WeakMap,W=(m=function(){function e(t){var n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),R(this,"validateToken",jest.fn((function(){return Promise.resolve({roles:[C.a.Agent],valid:!0,dateExpired:M(r,j),identity:"test123"})}))),R(this,"refreshToken",jest.fn((function(e){var t,n=(null===(t=M(r,w))||void 0===t?void 0:t.refreshedToken)||"token ".concat(e);return Promise.resolve({token:n,dateExpired:M(r,j)})}))),R(this,"getIdpUrl",jest.fn((function(e){var t=M(r,g)||"idp ".concat(e.redirectUrl);return Promise.resolve(t)}))),R(this,"setAccountSid",jest.fn()),A(this,w,t),A(this,j,((n=new Date).setFullYear(n.getFullYear()+1,1,1),n.setUTCHours(0,0,0,0),n))}var t,n,r;return e=Object(a.optional)()(e,void 0,0)||e,e=Object(a.inject)(T.c)(e,void 0,0)||e,t=e,(n=[{key:"onAuthenticatorConstructed",value:function(){var e,t=null===(e=M(this,w))||void 0===e?void 0:e.authenticatorConstructed;t&&t(this)}},{key:"$setIdpUrl",value:function(e){A(this,g,e)}}])&&P(t.prototype,n),r&&P(t,r),e}()).prototype,I="onAuthenticatorConstructed",F=[h],_=Object.getOwnPropertyDescriptor(m.prototype,"onAuthenticatorConstructed"),L=m.prototype,q={},Object.keys(_).forEach((function(e){q[e]=_[e]})),q.enumerable=!!q.enumerable,q.configurable=!!q.configurable,("value"in q||q.initializer)&&(q.writable=!0),q=F.slice().reverse().reduce((function(e,t){return t(W,I,e)||e}),q),L&&void 0!==q.initializer&&(q.value=q.initializer?q.initializer.call(L):void 0,q.initializer=void 0),void 0===q.initializer&&(Object.defineProperty(W,I,q),q=null),y=m))||y),N=n(4),V=(n(56),n(63),n(14),n(36),n(118),n(42));var z,B;n(27);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,$(e,t,"set"),n),n}function $(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var G,J,Q,Y,X=Object(a.injectable)()((B=new WeakMap,z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B.set(this,{writable:!0,value:void 0}),H(this,B,"ACXABC")}var t,n,r;return t=e,(n=[{key:"accountSid",get:function(){return function(e,t){return t.get?t.get.call(e):t.value}(e=this,$(e,B,"get"));var e},set:function(e){H(this,B,e)}}])&&K(t.prototype,n),r&&K(t,r),e}()))||z,Z=new a.ContainerModule((function(e){e(T.d).to(U).inSingletonScope(),e(T.a).to(X).inSingletonScope(),e(T.b).toFactory((function(e){return function(){return e.container.get(x.c)}})),e(T.f).toDynamicValue((function(e){return function(t){return function(e,t){var n=e.get(i.e).twilioServiceLoginUrl;if(e.isBound(T.e)){var r=e.get(T.e);r&&r.twilioIdpUrl&&(n=r.twilioIdpUrl)}return t?"".concat(n,"?localPort=").concat(t):n}(e.container,t)}}))})),ee=n(49),te=n(11),ne=n(24);function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ue(e,t,"get"))}function ae(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ue(e,t,"set"),n),n}function ue(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ce,se,le,fe=Object(a.injectable)()((J=new WeakMap,Q=new WeakMap,Y=new WeakMap,G=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),oe(this,"token","token"),J.set(this,{writable:!0,value:void 0}),Q.set(this,{writable:!0,value:void 0}),oe(this,"roles",[]),Y.set(this,{writable:!0,value:void 0}),oe(this,"init",jest.fn((function(e){return o.token=e,Promise.resolve()}))),oe(this,"updateToken",jest.fn((function(){return Promise.resolve()}))),oe(this,"destroy",jest.fn((function(){return ie(o,Y).removeAllListeners(),Promise.resolve()}))),ae(this,J,t),ae(this,Q,n),ae(this,Y,r)}var t,n,r;return e=Object(a.inject)(ne.b)(e,void 0,2)||e,e=Object(a.inject)(te.b)(e,void 0,1)||e,e=Object(a.inject)(x.c)(e,void 0,0)||e,t=e,(n=[{key:"$emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=ie(this,Y)).emit.apply(t,[e].concat(r))}},{key:"addListener",value:function(e,t){return ie(this,Y).on(e,t),this}},{key:"removeListener",value:function(e,t){return ie(this,Y).removeListener(e,t),this}}])&&re(t.prototype,n),r&&re(t,r),e}()))||G,de=n(76),pe=new a.ContainerModule((function(e){e(ee.b).to(fe).inSingletonScope(),e(ee.a).toConstantValue(Object(de.a)())})),ve=(n(15),n(19));function be(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ge(e,t,"get"))}function we(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ge(e,t,"set"),n),n}function ge(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var je=Object(a.injectable)()((se=new WeakMap,le=new WeakMap,ce=function(){function e(t,n,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se.set(this,{writable:!0,value:void 0}),ye(this,"roles",[x.a.Agent]),ye(this,"token","custom token"),le.set(this,{writable:!0,value:void 0}),ye(this,"init",jest.fn((function(e){return i.token=e,Promise.resolve()}))),ye(this,"updateToken",jest.fn(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(i,se).updateToken(t);case 2:i.token=t;case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){be(i,r,o,a,u,"next",e)}function u(e){be(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}())),ye(this,"destroy",jest.fn()),ye(this,"createTelemetryClient",jest.fn()),we(this,se,t);var a=(null==r?void 0:r.accountConfig)||n;this.config={account:a},we(this,le,o)}var t,n,r;return e=Object(a.inject)(ne.b)(e,void 0,3)||e,e=Object(a.optional)()(e,void 0,2)||e,e=Object(a.inject)(E.a)(e,void 0,2)||e,e=Object(a.inject)(i.c)(e,void 0,1)||e,e=Object(a.inject)(ve.c)(e,void 0,0)||e,t=e,(n=[{key:"addListener",value:function(e,t){return me(this,le).on(e,t),this}},{key:"removeListener",value:function(e,t){return me(this,le).removeListener(e,t),this}}])&&he(t.prototype,n),r&&he(t,r),e}()))||ce,ke=n(77),Oe=n(78),Se=new a.ContainerModule((function(e){e(E.d).to(je).inSingletonScope(),e(E.c).toProvider((function(e){return function(t,n){return Object(ke.a)(e.container,t,n)}})),e(E.b).to(Oe.a).inSingletonScope()})),Ee=n(59),xe=n(60),Ce=new a.ContainerModule((function(e){e(xe.a).toDynamicValue((function(){return new Ee.EventEmitter}))})),Te={twilioServiceLoginUrl:"twilioServiceLoginUrl"};function Pe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Pe(i,r,o,a,u,"next",e)}function u(e){Pe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Me(){return(Me=Re(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={runtimeDomain:"runtimeDomain",accountSid:"accountSid",publicAttributes:{loginPopup:!0}},t.isBound(O.j)&&(o=t.get(O.j))&&o.publicConfig&&(r=o.publicConfig),e.abrupt("return",Promise.resolve(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=n(79),De={features:[{description:"Show the Pre-Release Features tile on the admin dashboard.",docUrl:"https://twilio.com/docs",enabled:!1,id:"flex-features-show-on-admin-dashboard",name:"Show Pre-Release Features",stage:"force-disable"}],insightsActive:!0},We=jest.fn((function(){return function(){return Promise.resolve(De)}})),Ie=n(80),Fe=n(81);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=new a.ContainerModule((function(e){e(i.c).to(k).inSingletonScope(),e(i.d).to(Ae.a).inSingletonScope(),e(i.b).toProvider((function(e){return function(){var t=e.container.get(i.c);return Promise.resolve(t)}})),e(O.d).toDynamicValue((function(e){return function(t,n){var r=Le(Le({},e.container.get(i.d).get()),n);return Promise.resolve(r)}})),e(i.e).toConstantValue(Te),e(i.i).toProvider((function(e){return function(t){return function(e,t){return Me.apply(this,arguments)}(e.container,t)}})),e(i.f).toProvider(We),e(O.i).toDynamicValue((function(e){return Object(Fe.a)(e.container)})),e(i.g).toDynamicValue((function(e){return Object(Ie.a)(e.container)}))})),Ne=n(29),Ve=n(126),ze=(n(127),n(128),n(71)),Be=n(39);function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var o=Xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?Qe(e):t}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t,n){return(Ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et,tt,nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(n,e);var t=Ge(n);function n(){var e,r,o,i;He(this,n);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return Ze(Qe(i=t.call.apply(t,[this].concat(u))),"isConnected",!1),Ze(Qe(i),"connect",jest.fn()),Ze(Qe(i),"disconnect",jest.fn((function(){return i.emit(Be.a.Disconnected),Promise.resolve()}))),Ze(Qe(i),"updateToken",jest.fn((function(){return Promise.resolve()}))),Ze(Qe(i),"post",jest.fn((function(){return Promise.resolve({status:{code:123,status:"status"},headers:{}})}))),Ze(Qe(i),"$getRateLimitError",(function(){var e=new ze.a("Rate limit exceeded error");return Object.assign(e,{reply:{status:{code:429}},body:{code:20429,message:"Rate limit exceeded"}}),e})),Ze(Qe(i),"on",(function(t,r){return Ye((e=Qe(i),Xe(n.prototype)),"on",e).call(e,t,r),Qe(i)})),Ze(Qe(i),"removeListener",(function(e,t){return Ye((r=Qe(i),Xe(n.prototype)),"removeListener",r).call(r,e,t),Qe(i)})),Ze(Qe(i),"emit",(function(e){for(var t,r=arguments.length,a=new Array(r>1?r-1:0),u=1;u<r;u++)a[u-1]=arguments[u];return(t=Ye((o=Qe(i),Xe(n.prototype)),"emit",o)).call.apply(t,[o,e].concat(a))})),i}return n}(ne.a),rt=new a.ContainerModule((function(e){var t;e(Ne.a).toConstructor(nt),e(Ne.b).toConstantValue("TEST_PRODUCT"),e(Ne.d).to(Ve.a).inSingletonScope(),e(Ne.c).toFactory((function(){return function(){return t||(t=new nt),t}}))})),ot=(n(50),n(61)),it=n(82),at=n(22);function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,lt(e,t,"get"))}function st(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,lt(e,t,"set"),n),n}function lt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ft,dt,pt=Object(a.injectable)()((tt=new WeakMap,et=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tt.set(this,{writable:!0,value:void 0}),ut(this,"level",1),ut(this,"trace",jest.fn()),ut(this,"debug",jest.fn()),ut(this,"log",jest.fn()),ut(this,"info",jest.fn()),ut(this,"warn",jest.fn()),ut(this,"error",jest.fn()),ut(this,"setLevel",(function(e){ct(n,tt).setLevel(e)})),ut(this,"getLevel",(function(){return ct(n,tt).getLevel()})),st(this,tt,t)}))||et,vt=n(83),bt=new a.ContainerModule((function(e){e(at.e).toConstantValue(ot.getLogger),e(at.b).toFactory((function(e){return Object(it.a)(e.container)})),e(at.f).toConstructor(pt),e(at.a).toConstantValue([]),e(at.d).toConstantValue(Object(vt.a)()),e(at.c).toConstantValue(new Map)})),ht=n(12),yt=(n(40),n(32));function mt(e,t){var n=e.get(yt.c);return n.name=t,n}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,jt(e,t,"set"),n),n}function jt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var kt,Ot,St=Object(a.injectable)()((dt=new WeakMap,ft=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dt.set(this,{writable:!0,value:void 0}),wt(this,"createEventGroup",jest.fn((function(e){var t,r;return(t=n,r=dt,function(e,t){return t.get?t.get.call(e):t.value}(t,jt(t,r,"get"))).call(n,n,e)}))),wt(this,"setSessionData",jest.fn((function(e){return n.sessionData=e,Promise.resolve()}))),gt(this,dt,t)}))||ft;function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Pt(e,t,"get"))}function Tt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Pt(e,t,"set"),n),n}function Pt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}St=Object(a.inject)(ht.c)(St,void 0,0)||St;var Rt,Mt,At=Object(a.injectable)()((Ot=new WeakMap,kt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ot.set(this,{writable:!0,value:void 0}),xt(this,"addEvents",jest.fn((function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=Ct(n,Ot)).processEvents.apply(e,[n.telemetryClient.name,n.name,n.telemetryClient.sessionData].concat(r))}))),xt(this,"addErrorEvent",jest.fn((function(e){return Ct(n,Ot).processEvents(n.telemetryClient.name,n.name,n.telemetryClient.sessionData,e)}))),Tt(this,Ot,t)}var t,n,r;return e=Object(a.inject)(ht.f)(e,void 0,0)||e,t=e,(n=[{key:"$setName",value:function(e){this.name=e}}])&&Et(t.prototype,n),r&&Et(t,r),e}()))||kt;function Dt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,It(e,t,"get"))}function Wt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,It(e,t,"set"),n),n}function It(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ft=Object(a.injectable)()((Mt=new WeakMap,Rt=function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Mt.set(this,{writable:!0,value:void 0}),n=this,r="processEvents",o=jest.fn((function(e,t,n){Dt(i,Mt).debug("common attributes: ",n);for(var r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];return o.forEach((function(n){return Dt(i,Mt).log("sending event for group: ",t,"payload type",e,n.eventName)})),Promise.resolve({eventsSucceeded:o.length,eventsFailed:0,eventsNotProcessed:0})})),r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,Wt(this,Mt,t(N.c.TelemetryProcessor))}))||Rt;Ft=Object(a.inject)(N.d)(Ft,void 0,0)||Ft;var _t,Lt=n(84),qt=new a.ContainerModule((function(e){e(yt.b).toFactory((function(e){return function(t){return mt(e.container,t)}})),e(yt.c).to(St).inSingletonScope(),e(ht.c).toFactory((function(e){return function(t,n){return function(e,t,n){var r=e.get(yt.d);return r.telemetryClient=t,r.name=n,r}(e.container,t,n)}})),e(yt.d).to(At),e(ht.f).to(Ft).inSingletonScope(),e(yt.e).toConstantValue(Object(Lt.a)())})),Ut=n(47),Nt=new a.ContainerModule((function(e){e(Ut.a).toDynamicValue((function(e){return mt(e.container,"sdk-v1")})).inSingletonScope()})),Vt=n(85),zt=n(86),Bt=n(28),Kt=n(0);function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gt,Jt=Object(a.injectable)()(_t=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$t(this,"hitCountInTimeWindow",0),$t(this,"check",jest.fn((function(){if(t.hitCountInTimeWindow+=1,t.$mockedErrorCode)throw new Kt.c(t.$mockedErrorCode)}))),$t(this,"cleanup",jest.fn()),$t(this,"setup",jest.fn((function(e){t.$options=e,t.maxHitsInTimeWindow=e.maxHitsInTimeWindow,t.timeWindow=e.timeWindow})))}var t,n,r;return t=e,(n=[{key:"$mockThrowsError",value:function(e){this.$mockedErrorCode=e}},{key:"$mockResetTimeWindow",value:function(){this.hitCountInTimeWindow=0}}])&&Ht(t.prototype,n),r&&Ht(t,r),e}())||_t,Qt=new a.ContainerModule((function(e){e(Bt.d).to(Jt),e(Bt.c).toConstantValue(new Map),e(Bt.b).toFactory((function(e){return function(t){return Object(zt.a)(e.container,t)}})),e(Bt.a).toDynamicValue((function(e){return function(){return Object(Vt.a)(e.container)}}))})),Yt=n(87),Xt=n(88),Zt=n(89),en=n(90),tn=n(17),nn=n(91),rn=n(92);function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var an={},un=Object(a.injectable)()(Gt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getCachedItem",value:function(e){if(void 0!==an[e])return an[e]}},{key:"setCachedItem",value:function(e,t){an[e]=t}}])&&on(t.prototype,n),r&&on(t,r),e}())||Gt,cn=function(){an={}},sn=n(43),ln=new a.ContainerModule((function(e){e(sn.b).to(un).inSingletonScope(),e(sn.a).toConstantValue(cn)}));function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yn(e);if(t){var o=yn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bn(this,n)}}function bn(e,t){return!t||"object"!==fn(t)&&"function"!=typeof t?hn(e):t}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(e,t,"get"))}var wn=new WeakMap,gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(i,e);var t,n,r,o=vn(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this),wn.set(hn(e),{writable:!0,value:function(){var t;e.load(Z),e.load(Ue),e.load(pe),e.load(Se),e.load(Ce),e.load(rt),e.load(bt),e.load(qt),e.load(Nt),e.load(Qt),e.load(ln),(t=hn(e)).bind(tn.f).to(nn.a).inSingletonScope(),t.bind(tn.d).to(rn.a).inSingletonScope(),Yt.a.with(t),Xt.a.with(t),Zt.a.with(t),en.a.with(t)}}),mn(hn(e),wn).call(hn(e));var t=Object(V.a)();return e.parent=t,e}return t=i,(n=[{key:"bindOriginal",value:function(e){this.unbind(e)}}])&&dn(t.prototype,n),r&&dn(t,r),i}(a.Container),jn=n(119),kn=function(e,t){return function(n){var r=new gn;return t&&n&&r.bind(t).toConstantValue(n),r.get(e)}},On={auth:kn(x.b,T.c),getLogger:kn(N.d),getTwilioIdpUrl:kn(x.d,T.e),getPublicConfig:kn(i.i,O.j),createClient:kn(S.c,E.a),clearCache:kn(sn.a),getAccountConfig:kn(i.g),getFeaturesConfig:kn(i.h)},Sn=function(e,t){return On[e](t)},En=Sn("auth"),xn=Sn("getLogger"),Cn=Sn("getTwilioIdpUrl"),Tn=Sn("getPublicConfig"),Pn=Sn("createClient"),Rn=Sn("clearCache"),Mn=Sn("getAccountConfig"),An=Sn("getFeaturesConfig")}]);
//# sourceMappingURL=mocks.js.map